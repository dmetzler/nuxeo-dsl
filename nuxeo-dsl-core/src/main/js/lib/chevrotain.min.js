/*! chevrotain - v1.0.1 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("chevrotain",[],e):"object"==typeof exports?exports.chevrotain=e():t.chevrotain=e()}("undefined"!=typeof self?self:this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=20)}([function(t,e,n){"use strict";function r(t){return t&&0===t.length}function i(t){return void 0===t||null===t?[]:Object.keys(t)}function o(t){for(var e=[],n=Object.keys(t),r=0;r<n.length;r++)e.push(t[n[r]]);return e}function a(t,e){for(var n=[],r=i(t),o=0;o<r.length;o++){var a=r[o];n.push(e.call(null,t[a],a))}return n}function s(t,e){for(var n=[],r=0;r<t.length;r++)n.push(e.call(null,t[r],r));return n}function c(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];Array.isArray(r)?e=e.concat(c(r)):e.push(r)}return e}function u(t){return r(t)?void 0:t[0]}function l(t){var e=t&&t.length;return e?t[e-1]:void 0}function p(t,e){if(Array.isArray(t))for(var n=0;n<t.length;n++)e.call(null,t[n],n);else{if(!C(t))throw Error("non exhaustive match");for(var r=i(t),n=0;n<r.length;n++){var o=r[n],a=t[o];e.call(null,a,o)}}}function f(t){return"string"==typeof t}function h(t){return void 0===t}function d(t){return t instanceof Function}function T(t,e){return void 0===e&&(e=1),t.slice(e,t.length)}function E(t,e){return void 0===e&&(e=1),t.slice(0,t.length-e)}function m(t,e){var n=[];if(Array.isArray(t))for(var r=0;r<t.length;r++){var i=t[r];e.call(null,i)&&n.push(i)}return n}function v(t,e){return m(t,function(t){return!e(t)})}function y(t,e){for(var n=Object.keys(t),r={},i=0;i<n.length;i++){var o=n[i],a=t[o];e(a)&&(r[o]=a)}return r}function _(t,e){return!!C(t)&&t.hasOwnProperty(e)}function g(t,e){return void 0!==N(t,function(t){return t===e})}function R(t){for(var e=[],n=0;n<t.length;n++)e.push(t[n]);return e}function A(t){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}function N(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(e.call(null,r))return r}}function S(t,e){for(var n=[],r=0;r<t.length;r++){var i=t[r];e.call(null,i)&&n.push(i)}return n}function O(t,e,n){for(var r=Array.isArray(t)?t:o(t),i=n,a=0;a<r.length;a++)i=e.call(null,i,r[a],a);return i}function I(t){return v(t,function(t){return null===t||void 0===t})}function L(t,e){void 0===e&&(e=function(t){return t});var n=[];return O(t,function(t,r){var i=e(r);return g(n,i)?t:(n.push(i),t.concat(r))},[])}function P(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=[null],i=r.concat(e);return Function.bind.apply(t,i)}function k(t){return Array.isArray(t)}function x(t){return t instanceof RegExp}function C(t){return t instanceof Object}function M(t,e){for(var n=0;n<t.length;n++)if(!e(t[n],n))return!1;return!0}function D(t,e){return v(t,function(t){return g(e,t)})}function F(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return!0;return!1}function w(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1}function U(t,e){var n=R(t);return n.sort(function(t,n){return e(t)-e(n)}),n}function b(t,e){if(t.length!==e.length)throw Error("can't zipObject with different number of keys and values!");for(var n={},r=0;r<t.length;r++)n[t[r]]=e[r];return n}function K(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0;r<e.length;r++)for(var o=e[r],a=i(o),s=0;s<a.length;s++){var c=a[s];t[c]=o[c]}return t}function W(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0;r<e.length;r++){var o=e[r];if(!h(o))for(var a=i(o),s=0;s<a.length;s++){var c=a[s];_(t,c)||(t[c]=o[c])}}return t}function B(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return W.apply(null,[{}].concat(t))}function V(t,e){var n={};return p(t,function(t){var r=e(t),i=n[r];i?i.push(t):n[r]=[t]}),n}function G(t,e){for(var n=A(t),r=i(e),o=0;o<r.length;o++){var a=r[o],s=e[a];n[a]=s}return n}function j(){}function H(t){return t}Object.defineProperty(e,"__esModule",{value:!0}),e.isEmpty=r,e.keys=i,e.values=o,e.mapValues=a,e.map=s,e.flatten=c,e.first=u,e.last=l,e.forEach=p,e.isString=f,e.isUndefined=h,e.isFunction=d,e.drop=T,e.dropRight=E,e.filter=m,e.reject=v,e.pick=y,e.has=_,e.contains=g,e.cloneArr=R,e.cloneObj=A,e.find=N,e.findAll=S,e.reduce=O,e.compact=I,e.uniq=L,e.partial=P,e.isArray=k,e.isRegExp=x,e.isObject=C,e.every=M,e.difference=D,e.some=F,e.indexOf=w,e.sortBy=U,e.zipObject=b,e.assign=K,e.assignNoOverwrite=W,e.defaults=B,e.groupBy=V,e.merge=G,e.NOOP=j,e.IDENTITY=H},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=n(2);!function(t){function e(t){return i.map(t,n)}function n(t){function e(t){return i.map(t,n)}if(t instanceof s)return{type:"NonTerminal",name:t.nonTerminalName,occurrenceInParent:t.occurrenceInParent};if(t instanceof u)return{type:"Flat",definition:e(t.definition)};if(t instanceof l)return{type:"Option",definition:e(t.definition)};if(t instanceof p)return{type:"RepetitionMandatory",definition:e(t.definition)};if(t instanceof f)return{type:"RepetitionMandatoryWithSeparator",separator:n(new E(t.separator)),definition:e(t.definition)};if(t instanceof d)return{type:"RepetitionWithSeparator",separator:n(new E(t.separator)),definition:e(t.definition)};if(t instanceof h)return{type:"Repetition",definition:e(t.definition)};if(t instanceof T)return{type:"Alternation",definition:e(t.definition)};if(t instanceof E){var r={type:"Terminal",name:o.tokenName(t.terminalType),label:o.tokenLabel(t.terminalType),occurrenceInParent:t.occurrenceInParent},a=t.terminalType.PATTERN;return t.terminalType.PATTERN&&(r.pattern=i.isRegExp(a)?a.source:a),r}if(t instanceof c)return{type:"Rule",name:t.name,definition:e(t.definition)};throw Error("non exhaustive match")}var a=function(){function t(t){this.definition=t}return t.prototype.accept=function(t){t.visit(this),i.forEach(this.definition,function(e){e.accept(t)})},t}();t.AbstractProduction=a;var s=function(t){function e(e,n,r,i){void 0===n&&(n=void 0),void 0===r&&(r=1),void 0===i&&(i=!1);var o=t.call(this,[])||this;return o.nonTerminalName=e,o.referencedRule=n,o.occurrenceInParent=r,o.implicitOccurrenceIndex=i,o}return r(e,t),Object.defineProperty(e.prototype,"definition",{get:function(){return void 0!==this.referencedRule?this.referencedRule.definition:[]},set:function(t){},enumerable:!0,configurable:!0}),e.prototype.accept=function(t){t.visit(this)},e}(a);t.NonTerminal=s;var c=function(t){function e(e,n,r){void 0===r&&(r="");var i=t.call(this,n)||this;return i.name=e,i.orgText=r,i}return r(e,t),e}(a);t.Rule=c;var u=function(t){function e(e,n){var r=t.call(this,e)||this;return r.name=n,r}return r(e,t),e}(a);t.Flat=u;var l=function(t){function e(e,n,r,i){void 0===n&&(n=1),void 0===i&&(i=!1);var o=t.call(this,e)||this;return o.occurrenceInParent=n,o.name=r,o.implicitOccurrenceIndex=i,o}return r(e,t),e}(a);t.Option=l;var p=function(t){function e(e,n,r,i){void 0===n&&(n=1),void 0===i&&(i=!1);var o=t.call(this,e)||this;return o.occurrenceInParent=n,o.name=r,o.implicitOccurrenceIndex=i,o}return r(e,t),e}(a);t.RepetitionMandatory=p;var f=function(t){function e(e,n,r,i,o){void 0===r&&(r=1),void 0===o&&(o=!1);var a=t.call(this,e)||this;return a.separator=n,a.occurrenceInParent=r,a.name=i,a.implicitOccurrenceIndex=o,a}return r(e,t),e}(a);t.RepetitionMandatoryWithSeparator=f;var h=function(t){function e(e,n,r,i){void 0===n&&(n=1),void 0===i&&(i=!1);var o=t.call(this,e)||this;return o.occurrenceInParent=n,o.name=r,o.implicitOccurrenceIndex=i,o}return r(e,t),e}(a);t.Repetition=h;var d=function(t){function e(e,n,r,i,o){void 0===r&&(r=1),void 0===o&&(o=!1);var a=t.call(this,e)||this;return a.separator=n,a.occurrenceInParent=r,a.name=i,a.implicitOccurrenceIndex=o,a}return r(e,t),e}(a);t.RepetitionWithSeparator=d;var T=function(t){function e(e,n,r,i){void 0===n&&(n=1),void 0===i&&(i=!1);var o=t.call(this,e)||this;return o.occurrenceInParent=n,o.name=r,o.implicitOccurrenceIndex=i,o}return r(e,t),e}(a);t.Alternation=T;var E=function(){function t(t,e,n){void 0===e&&(e=1),void 0===n&&(n=!1),this.terminalType=t,this.occurrenceInParent=e,this.implicitOccurrenceIndex=n}return t.prototype.accept=function(t){t.visit(this)},t}();t.Terminal=E;var m=function(){function t(){}return t.prototype.visit=function(t){if(t instanceof s)return this.visitNonTerminal(t);if(t instanceof u)return this.visitFlat(t);if(t instanceof l)return this.visitOption(t);if(t instanceof p)return this.visitRepetitionMandatory(t);if(t instanceof f)return this.visitRepetitionMandatoryWithSeparator(t);if(t instanceof d)return this.visitRepetitionWithSeparator(t);if(t instanceof h)return this.visitRepetition(t);if(t instanceof T)return this.visitAlternation(t);if(t instanceof E)return this.visitTerminal(t);if(t instanceof c)return this.visitRule(t);throw Error("non exhaustive match")},t.prototype.visitNonTerminal=function(t){},t.prototype.visitFlat=function(t){},t.prototype.visitOption=function(t){},t.prototype.visitRepetition=function(t){},t.prototype.visitRepetitionMandatory=function(t){},t.prototype.visitRepetitionMandatoryWithSeparator=function(t){},t.prototype.visitRepetitionWithSeparator=function(t){},t.prototype.visitAlternation=function(t){},t.prototype.visitTerminal=function(t){},t.prototype.visitRule=function(t){},t}();t.GAstVisitor=m,t.serializeGrammar=e,t.serializeProduction=n}(e.gast||(e.gast={}))},function(t,e,n){"use strict";function r(t){return i(t)?t.LABEL:o(t)}function i(t){return l.isString(t.LABEL)&&""!==t.LABEL}function o(t){return l.isObject(t)&&t.hasOwnProperty("tokenName")&&l.isString(t.tokenName)?t.tokenName:p.functionName(t)}function a(t){return s(t)}function s(t){var e=t.name,n=t.pattern,r={};if(p.defineNameProp(r,e)||(r.tokenName=e),l.isUndefined(n)||(r.PATTERN=n),l.has(t,d))throw"The parent property is no longer supported.\nSee: [TODO-add link] for details.";return l.has(t,T)&&(r.CATEGORIES=t[T]),h.augmentTokenTypes([r]),l.has(t,E)&&(r.LABEL=t[E]),l.has(t,m)&&(r.GROUP=t[m]),l.has(t,y)&&(r.POP_MODE=t[y]),l.has(t,v)&&(r.PUSH_MODE=t[v]),l.has(t,_)&&(r.LONGER_ALT=t[_]),l.has(t,g)&&(r.LINE_BREAKS=t[g]),r}function c(t,e,n,r,i,o,a,s){return{image:e,startOffset:n,endOffset:r,startLine:i,endLine:o,startColumn:a,endColumn:s,tokenTypeIdx:t.tokenTypeIdx,tokenType:t}}function u(t,e){return h.tokenStructuredMatcher(t,e)}Object.defineProperty(e,"__esModule",{value:!0});var l=n(0),p=n(3),f=n(8),h=n(4);e.tokenLabel=r,e.hasTokenLabel=i,e.tokenName=o;var d="parent",T="categories",E="label",m="group",v="push_mode",y="pop_mode",_="longer_alt",g="line_breaks";e.createToken=a,e.EOF=a({name:"EOF",pattern:f.Lexer.NA}),h.augmentTokenTypes([e.EOF]),e.createTokenInstance=c,e.tokenMatcher=u},function(t,e,n){"use strict";function r(t){return i(t.constructor)}function i(t){var e=t.name;return e||t.toString().match(c)[1]}function o(t,e){var n=Object.getOwnPropertyDescriptor(t,u);return!(!s.isUndefined(n)&&!n.configurable)&&(Object.defineProperty(t,u,{enumerable:!1,configurable:!0,writable:!1,value:e}),!0)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),s=n(0);e.classNameFromInstance=r;var c=/^\s*function\s*(\S*)\s*\(/,u="name";e.functionName=i,e.defineNameProp=o;var l=function(){function t(){this._state={}}return t.prototype.keys=function(){return a.keys(this._state)},t.prototype.values=function(){return a.values(this._state)},t.prototype.put=function(t,e){this._state[t]=e},t.prototype.putAll=function(t){this._state=a.assign(this._state,t._state)},t.prototype.get=function(t){return this._state[t]},t.prototype.containsKey=function(t){return a.has(this._state,t)},t.prototype.clear=function(){this._state={}},t}();e.HashTable=l},function(t,e,n){"use strict";function r(t,e){var n=t.tokenTypeIdx;return n===e.tokenTypeIdx||!0===e.isParent&&!0===e.categoryMatchesMap[n]}function i(t,e){return t.tokenTypeIdx===e.tokenTypeIdx}function o(t){var e=a(t);s(e),u(e),c(e),m.forEach(e,function(t){t.isParent=t.categoryMatches.length>0})}function a(t){for(var e=m.cloneArr(t),n=t,r=!0;r;){n=m.compact(m.flatten(m.map(n,function(t){return t.CATEGORIES})));var i=m.difference(n,e);e=e.concat(i),m.isEmpty(i)?r=!1:n=i}return e}function s(t){m.forEach(t,function(t){p(t)||(e.tokenIdxToClass.put(e.tokenShortNameIdx,t),t.tokenTypeIdx=e.tokenShortNameIdx++),f(t)&&!m.isArray(t.CATEGORIES)&&(t.CATEGORIES=[t.CATEGORIES]),f(t)||(t.CATEGORIES=[]),h(t)||(t.categoryMatches=[]),d(t)||(t.categoryMatchesMap={}),T(t)||(t.tokenName=y.tokenName(t))})}function c(t){m.forEach(t,function(t){t.categoryMatches=[],m.forEach(t.categoryMatchesMap,function(n,r){t.categoryMatches.push(e.tokenIdxToClass.get(r).tokenTypeIdx)})})}function u(t){m.forEach(t,function(t){l([],t)})}function l(t,e){m.forEach(t,function(t){e.categoryMatchesMap[t.tokenTypeIdx]=!0}),m.forEach(e.CATEGORIES,function(n){var r=t.concat(e);m.contains(r,n)||l(r,n)})}function p(t){return m.has(t,"tokenTypeIdx")}function f(t){return m.has(t,"CATEGORIES")}function h(t){return m.has(t,"categoryMatches")}function d(t){return m.has(t,"categoryMatchesMap")}function T(t){return m.has(t,"tokenName")}function E(t){return m.has(t,"tokenTypeIdx")}Object.defineProperty(e,"__esModule",{value:!0});var m=n(0),v=n(3),y=n(2);e.tokenStructuredMatcher=r,e.tokenStructuredMatcherNoCategories=i,e.tokenShortNameIdx=1,e.tokenIdxToClass=new v.HashTable,e.augmentTokenTypes=o,e.expandCategories=a,e.assignTokenDefaultProps=s,e.assignCategoriesTokensProp=c,e.assignCategoriesMapProp=u,e.hasShortKeyProperty=p,e.hasCategoriesProperty=f,e.hasExtendingTokensTypesProperty=h,e.hasExtendingTokensTypesMapProperty=d,e.hasTokenNameProperty=T,e.isTokenType=E},function(t,e,n){"use strict";function r(t,e,n){function i(e){return e.concat(u.drop(t,s+1))}function o(t){var o=r(i(t),e,n);return a.concat(o)}void 0===n&&(n=[]),n=u.cloneArr(n);for(var a=[],s=0;n.length<e&&s<t.length;){var l=t[s];if(l instanceof c.gast.Flat)return o(l.definition);if(l instanceof c.gast.NonTerminal)return o(l.definition);if(l instanceof c.gast.Option)a=o(l.definition);else{if(l instanceof c.gast.RepetitionMandatory)return o(l.definition);if(l instanceof c.gast.RepetitionMandatoryWithSeparator){var p=[new c.gast.Flat(l.definition),new c.gast.Repetition([new c.gast.Terminal(l.separator)].concat(l.definition))];return o(p)}if(l instanceof c.gast.RepetitionWithSeparator){var p=l.definition.concat([new c.gast.Repetition([new c.gast.Terminal(l.separator)].concat(l.definition))]);a=o(p)}else if(l instanceof c.gast.Repetition)a=o(l.definition);else{if(l instanceof c.gast.Alternation)return u.forEach(l.definition,function(t){a=o(t.definition)}),a;if(!(l instanceof c.gast.Terminal))throw Error("non exhaustive match");n.push(l.terminalType)}}s++}return a.push({partialPath:n,suffixDef:u.drop(t,s)}),a}function i(t,e,n,r){var i=["EXIT_NONE_TERMINAL"],a=!1,s=e.length,l=s-r-1,p=[],f=[];for(f.push({idx:-1,def:t,ruleStack:[],occurrenceStack:[]});!u.isEmpty(f);){var h=f.pop();if("EXIT_ALTERNATIVE"!==h){var d=h.def,T=h.idx,E=h.ruleStack,m=h.occurrenceStack;if(!u.isEmpty(d)){var v=d[0];if("EXIT_NONE_TERMINAL"===v){var y={idx:T,def:u.drop(d),ruleStack:u.dropRight(E),occurrenceStack:u.dropRight(m)};f.push(y)}else if(v instanceof c.gast.Terminal)if(T<s-1){var _=T+1,g=e[_];if(n(g,v.terminalType)){var y={idx:_,def:u.drop(d),ruleStack:E,occurrenceStack:m};f.push(y)}}else{if(T!==s-1)throw Error("non exhaustive match");p.push({nextTokenType:v.terminalType,nextTokenOccurrence:v.occurrenceInParent,ruleStack:E,occurrenceStack:m}),a=!0}else if(v instanceof c.gast.NonTerminal){var R=u.cloneArr(E);R.push(v.nonTerminalName);var A=u.cloneArr(m);A.push(v.occurrenceInParent);var y={idx:T,def:v.definition.concat(i,u.drop(d)),ruleStack:R,occurrenceStack:A};f.push(y)}else if(v instanceof c.gast.Option){var N={idx:T,def:u.drop(d),ruleStack:E,occurrenceStack:m};f.push(N),f.push("EXIT_ALTERNATIVE");var S={idx:T,def:v.definition.concat(u.drop(d)),ruleStack:E,occurrenceStack:m};f.push(S)}else if(v instanceof c.gast.RepetitionMandatory){var O=new c.gast.Repetition(v.definition,v.occurrenceInParent),I=v.definition.concat([O],u.drop(d)),y={idx:T,def:I,ruleStack:E,occurrenceStack:m};f.push(y)}else if(v instanceof c.gast.RepetitionMandatoryWithSeparator){var L=new c.gast.Terminal(v.separator),O=new c.gast.Repetition([L].concat(v.definition),v.occurrenceInParent),I=v.definition.concat([O],u.drop(d)),y={idx:T,def:I,ruleStack:E,occurrenceStack:m};f.push(y)}else if(v instanceof c.gast.RepetitionWithSeparator){var N={idx:T,def:u.drop(d),ruleStack:E,occurrenceStack:m};f.push(N),f.push("EXIT_ALTERNATIVE");var L=new c.gast.Terminal(v.separator),P=new c.gast.Repetition([L].concat(v.definition),v.occurrenceInParent),I=v.definition.concat([P],u.drop(d)),S={idx:T,def:I,ruleStack:E,occurrenceStack:m};f.push(S)}else if(v instanceof c.gast.Repetition){var N={idx:T,def:u.drop(d),ruleStack:E,occurrenceStack:m};f.push(N),f.push("EXIT_ALTERNATIVE");var P=new c.gast.Repetition(v.definition,v.occurrenceInParent),I=v.definition.concat([P],u.drop(d)),S={idx:T,def:I,ruleStack:E,occurrenceStack:m};f.push(S)}else if(v instanceof c.gast.Alternation)for(var k=v.definition.length-1;k>=0;k--){var x=v.definition[k],C={idx:T,def:x.definition.concat(u.drop(d)),ruleStack:E,occurrenceStack:m};f.push(C),f.push("EXIT_ALTERNATIVE")}else if(v instanceof c.gast.Flat)f.push({idx:T,def:v.definition.concat(u.drop(d)),ruleStack:E,occurrenceStack:m});else{if(!(v instanceof c.gast.Rule))throw Error("non exhaustive match");f.push(o(v,T,E,m))}}}else a&&u.last(f).idx<=l&&f.pop()}return p}function o(t,e,n,r){var i=u.cloneArr(n);i.push(t.name);var o=u.cloneArr(r);return o.push(1),{idx:e,def:t.definition,ruleStack:i,occurrenceStack:o}}var a=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var s=n(10),c=n(1),u=n(0),l=n(2),p=n(15),f=function(t){function e(e,n){var r=t.call(this)||this;return r.topProd=e,r.path=n,r.possibleTokTypes=[],r.nextProductionName="",r.nextProductionOccurrence=0,r.found=!1,r.isAtEndOfPath=!1,r}return a(e,t),e.prototype.startWalking=function(){if(this.found=!1,this.path.ruleStack[0]!==this.topProd.name)throw Error("The path does not start with the walker's top Rule!");return this.ruleStack=u.cloneArr(this.path.ruleStack).reverse(),this.occurrenceStack=u.cloneArr(this.path.occurrenceStack).reverse(),this.ruleStack.pop(),this.occurrenceStack.pop(),this.updateExpectedNext(),this.walk(this.topProd),this.possibleTokTypes},e.prototype.walk=function(e,n){void 0===n&&(n=[]),this.found||t.prototype.walk.call(this,e,n)},e.prototype.walkProdRef=function(t,e,n){if(t.referencedRule.name===this.nextProductionName&&t.occurrenceInParent===this.nextProductionOccurrence){var r=e.concat(n);this.updateExpectedNext(),this.walk(t.referencedRule,r)}},e.prototype.updateExpectedNext=function(){u.isEmpty(this.ruleStack)?(this.nextProductionName="",this.nextProductionOccurrence=0,this.isAtEndOfPath=!0):(this.nextProductionName=this.ruleStack.pop(),this.nextProductionOccurrence=this.occurrenceStack.pop())},e}(s.RestWalker);e.AbstractNextPossibleTokensWalker=f;var h=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.path=n,r.nextTerminalName="",r.nextTerminalOccurrence=0,r.nextTerminalName=l.tokenName(r.path.lastTok),r.nextTerminalOccurrence=r.path.lastTokOccurrence,r}return a(e,t),e.prototype.walkTerminal=function(t,e,n){if(this.isAtEndOfPath&&l.tokenName(t.terminalType)===this.nextTerminalName&&t.occurrenceInParent===this.nextTerminalOccurrence&&!this.found){var r=e.concat(n),i=new c.gast.Flat(r);this.possibleTokTypes=p.first(i),this.found=!0}},e}(f);e.NextAfterTokenWalker=h;var d=function(t){function e(e,n){var r=t.call(this)||this;return r.topRule=e,r.occurrence=n,r.result={token:void 0,occurrence:void 0,isEndOfRule:void 0},r}return a(e,t),e.prototype.startWalking=function(){return this.walk(this.topRule),this.result},e}(s.RestWalker);e.AbstractNextTerminalAfterProductionWalker=d;var T=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.walkMany=function(e,n,r){if(e.occurrenceInParent===this.occurrence){var i=u.first(n.concat(r));this.result.isEndOfRule=void 0===i,i instanceof c.gast.Terminal&&(this.result.token=i.terminalType,this.result.occurrence=i.occurrenceInParent)}else t.prototype.walkMany.call(this,e,n,r)},e}(d);e.NextTerminalAfterManyWalker=T;var E=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.walkManySep=function(e,n,r){if(e.occurrenceInParent===this.occurrence){var i=u.first(n.concat(r));this.result.isEndOfRule=void 0===i,i instanceof c.gast.Terminal&&(this.result.token=i.terminalType,this.result.occurrence=i.occurrenceInParent)}else t.prototype.walkManySep.call(this,e,n,r)},e}(d);e.NextTerminalAfterManySepWalker=E;var m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.walkAtLeastOne=function(e,n,r){if(e.occurrenceInParent===this.occurrence){var i=u.first(n.concat(r));this.result.isEndOfRule=void 0===i,i instanceof c.gast.Terminal&&(this.result.token=i.terminalType,this.result.occurrence=i.occurrenceInParent)}else t.prototype.walkAtLeastOne.call(this,e,n,r)},e}(d);e.NextTerminalAfterAtLeastOneWalker=m;var v=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.walkAtLeastOneSep=function(e,n,r){if(e.occurrenceInParent===this.occurrence){var i=u.first(n.concat(r));this.result.isEndOfRule=void 0===i,i instanceof c.gast.Terminal&&(this.result.token=i.terminalType,this.result.occurrence=i.occurrenceInParent)}else t.prototype.walkAtLeastOneSep.call(this,e,n,r)},e}(d);e.NextTerminalAfterAtLeastOneSepWalker=v,e.possiblePathsFrom=r,e.nextPossibleTokensAfter=i},function(t,e,n){"use strict";function r(t){return void 0===t&&(t=void 0),function(){return t}}function i(t){this.name=O,this.message=t}Object.defineProperty(e,"__esModule",{value:!0});var o=n(7),a=n(7),s=n(12),c=n(3),u=n(21),l=n(13),p=n(0),f=n(23),h=n(2),d=n(14),T=n(24),E=n(5),m=n(18),v=n(1),y=n(9),_=n(4),g=n(16),R=n(17),A=n(26),N=n(19),S=v.gast.serializeGrammar;!function(t){t[t.INVALID_RULE_NAME=0]="INVALID_RULE_NAME",t[t.DUPLICATE_RULE_NAME=1]="DUPLICATE_RULE_NAME",t[t.INVALID_RULE_OVERRIDE=2]="INVALID_RULE_OVERRIDE",t[t.DUPLICATE_PRODUCTIONS=3]="DUPLICATE_PRODUCTIONS",t[t.UNRESOLVED_SUBRULE_REF=4]="UNRESOLVED_SUBRULE_REF",t[t.LEFT_RECURSION=5]="LEFT_RECURSION",t[t.NONE_LAST_EMPTY_ALT=6]="NONE_LAST_EMPTY_ALT",t[t.AMBIGUOUS_ALTS=7]="AMBIGUOUS_ALTS",t[t.CONFLICT_TOKENS_RULES_NAMESPACE=8]="CONFLICT_TOKENS_RULES_NAMESPACE",t[t.INVALID_TOKEN_NAME=9]="INVALID_TOKEN_NAME",t[t.INVALID_NESTED_RULE_NAME=10]="INVALID_NESTED_RULE_NAME",t[t.DUPLICATE_NESTED_NAME=11]="DUPLICATE_NESTED_NAME",t[t.NO_NON_EMPTY_LOOKAHEAD=12]="NO_NON_EMPTY_LOOKAHEAD",t[t.AMBIGUOUS_PREFIX_ALTS=13]="AMBIGUOUS_PREFIX_ALTS",t[t.TOO_MANY_ALTS=14]="TOO_MANY_ALTS"}(e.ParserDefinitionErrorType||(e.ParserDefinitionErrorType={}));var O="InRuleRecoveryException";e.END_OF_FILE=h.createTokenInstance(h.EOF,"",NaN,NaN,NaN,NaN,NaN,NaN),Object.freeze(e.END_OF_FILE);var I=Object.freeze({recoveryEnabled:!1,maxLookahead:4,ignoredIssues:{},dynamicTokensEnabled:!1,outputCst:!1,errorMessageProvider:N.defaultErrorProvider}),L=Object.freeze({recoveryValueFunc:function(){},resyncEnabled:!0});e.EMPTY_ALT=r;var P={},k=function(){function t(t,e,n){if(void 0===n&&(n=I),this._errors=[],this.isBackTrackingStack=[],this.RULE_STACK=[],this.RULE_OCCURRENCE_STACK=[],this.CST_STACK=[],this.tokensMap=void 0,this.definedRulesNames=[],this.shortRuleNameToFull=new c.HashTable,this.fullRuleNameToShort=new c.HashTable,this.ruleShortNameIdx=256,this.LAST_EXPLICIT_RULE_STACK=[],this.selfAnalysisDone=!1,this.currIdx=-1,this._productions=new c.HashTable,this.input=t,this.recoveryEnabled=p.has(n,"recoveryEnabled")?n.recoveryEnabled:I.recoveryEnabled,this.recoveryEnabled||(this.attemptInRepetitionRecovery=p.NOOP),this.dynamicTokensEnabled=p.has(n,"dynamicTokensEnabled")?n.dynamicTokensEnabled:I.dynamicTokensEnabled,this.maxLookahead=p.has(n,"maxLookahead")?n.maxLookahead:I.maxLookahead,this.ignoredIssues=p.has(n,"ignoredIssues")?n.ignoredIssues:I.ignoredIssues,this.outputCst=p.has(n,"outputCst")?n.outputCst:I.outputCst,this.errorMessageProvider=p.defaults(n.errorMessageProvider,I.errorMessageProvider),this.outputCst||(this.cstInvocationStateUpdate=p.NOOP,this.cstFinallyStateUpdate=p.NOOP,this.cstPostTerminal=p.NOOP,this.cstPostNonTerminal=p.NOOP,this.getLastExplicitRuleShortName=this.getLastExplicitRuleShortNameNoCst,this.getPreviousExplicitRuleShortName=this.getPreviousExplicitRuleShortNameNoCst,this.getPreviousExplicitRuleOccurenceIndex=this.getPreviousExplicitRuleOccurenceIndexNoCst,this.manyInternal=this.manyInternalNoCst,this.orInternal=this.orInternalNoCst,this.optionInternal=this.optionInternalNoCst,this.atLeastOneInternal=this.atLeastOneInternalNoCst,this.manySepFirstInternal=this.manySepFirstInternalNoCst,this.atLeastOneSepFirstInternal=this.atLeastOneSepFirstInternalNoCst),this.className=c.classNameFromInstance(this),this.firstAfterRepMap=o.getFirstAfterRepForClass(this.className),this.classLAFuncs=o.getLookaheadFuncsForClass(this.className),this.cstDictDefForRule=o.getCstDictDefPerRuleForClass(this.className),o.CLASS_TO_DEFINITION_ERRORS.containsKey(this.className)?this.definitionErrors=o.CLASS_TO_DEFINITION_ERRORS.get(this.className):(this.definitionErrors=[],o.CLASS_TO_DEFINITION_ERRORS.put(this.className,this.definitionErrors)),p.isArray(e))this.tokensMap=p.reduce(e,function(t,e){return t[h.tokenName(e)]=e,t},{});else if(p.has(e,"modes")&&p.every(p.flatten(p.values(e.modes)),_.isTokenType)){var r=p.flatten(p.values(e.modes)),i=p.uniq(r);this.tokensMap=p.reduce(i,function(t,e){return t[h.tokenName(e)]=e,t},{})}else{if(!p.isObject(e))throw new Error("<tokensDictionary> argument must be An Array of Token constructors A dictionary of Token constructors or an IMultiModeLexerDefinition");this.tokensMap=p.cloneObj(e)}var a=p.every(p.values(e),function(t){return p.isEmpty(t.categoryMatches)});this.tokenMatcher=a?_.tokenStructuredMatcherNoCategories:_.tokenStructuredMatcher,this.tokensMap.EOF=h.EOF,_.augmentTokenTypes(p.values(this.tokensMap))}return t.performSelfAnalysis=function(e){var n,r=[];e.selfAnalysisDone=!0;var i=c.classNameFromInstance(e);if(""===i)throw Error("A Parser's constructor may not be an anonymous Function, it must be a named function\nThe constructor's name is used at runtime for performance (caching) purposes.");if(!o.CLASS_TO_SELF_ANALYSIS_DONE.containsKey(i)){o.CLASS_TO_SELF_ANALYSIS_DONE.put(i,!0);var a=e._productions,s=new c.HashTable;p.forEach(a.keys(),function(t){var e=a.get(t);s.put(t,y.cloneProduction(e))}),o.getProductionsForClass(i).putAll(s),r=o.CLASS_TO_DEFINITION_ERRORS.get(i);var h=u.resolveGrammar(s);if(r.push.apply(r,h),p.isEmpty(h)){var d=l.validateGrammar(s.values(),e.maxLookahead,p.values(e.tokensMap),e.ignoredIssues);r.push.apply(r,d)}if(!p.isEmpty(r)&&!t.DEFER_DEFINITION_ERRORS_HANDLING)throw n=p.map(r,function(t){return t.message}),new Error("Parser Definition Errors detected\n: "+n.join("\n-------------------------------\n"));if(p.isEmpty(r)){var T=f.computeAllProdsFollows(s.values());o.setResyncFollowsForClass(i,T)}var E=g.analyzeCst(s.values(),e.fullRuleNameToShort);o.getCstDictDefPerRuleForClass(i).putAll(E.dictDef),o.CLASS_TO_ALL_RULE_NAMES.put(i,E.allRuleNames)}if(!p.isEmpty(o.CLASS_TO_DEFINITION_ERRORS.get(i))&&!t.DEFER_DEFINITION_ERRORS_HANDLING)throw n=p.map(o.CLASS_TO_DEFINITION_ERRORS.get(i),function(t){return t.message}),new Error("Parser Definition Errors detected\n: "+n.join("\n-------------------------------\n"))},Object.defineProperty(t.prototype,"errors",{get:function(){return p.cloneArr(this._errors)},set:function(t){this._errors=t},enumerable:!0,configurable:!0}),t.prototype.reset=function(){this.resetLexerState(),this.isBackTrackingStack=[],this.errors=[],this.RULE_STACK=[],this.LAST_EXPLICIT_RULE_STACK=[],this.CST_STACK=[],this.RULE_OCCURRENCE_STACK=[]},t.prototype.isAtEndOfInput=function(){return this.tokenMatcher(this.LA(1),h.EOF)},t.prototype.getBaseCstVisitorConstructor=function(){var t=a.CLASS_TO_BASE_CST_VISITOR.get(this.className);if(p.isUndefined(t)){var e=a.CLASS_TO_ALL_RULE_NAMES.get(this.className);t=A.createBaseSemanticVisitorConstructor(this.className,e),a.CLASS_TO_BASE_CST_VISITOR.put(this.className,t)}return t},t.prototype.getBaseCstVisitorConstructorWithDefaults=function(){var t=a.CLASS_TO_BASE_CST_VISITOR_WITH_DEFAULTS.get(this.className);if(p.isUndefined(t)){var e=a.CLASS_TO_ALL_RULE_NAMES.get(this.className),n=this.getBaseCstVisitorConstructor();t=A.createBaseVisitorConstructorWithDefaults(this.className,e,n),a.CLASS_TO_BASE_CST_VISITOR_WITH_DEFAULTS.put(this.className,t)}return t},t.prototype.getGAstProductions=function(){return o.getProductionsForClass(this.className)},t.prototype.getSerializedGastProductions=function(){return S(o.getProductionsForClass(this.className).values())},t.prototype.computeContentAssist=function(t,e){var n=o.getProductionsForClass(this.className).get(t);if(p.isUndefined(n))throw Error("Rule ->"+t+"<- does not exist in this grammar.");return E.nextPossibleTokensAfter([n],e,this.tokenMatcher,this.maxLookahead)},t.prototype.isBackTracking=function(){return!p.isEmpty(this.isBackTrackingStack)},t.prototype.getCurrRuleFullName=function(){var t=this.getLastExplicitRuleShortName();return this.shortRuleNameToFull.get(t)},t.prototype.shortRuleNameToFullName=function(t){return this.shortRuleNameToFull.get(t)},t.prototype.getHumanReadableRuleStack=function(){var t=this;return p.isEmpty(this.LAST_EXPLICIT_RULE_STACK)?p.map(this.RULE_STACK,function(e){return t.shortRuleNameToFullName(e)}):p.map(this.LAST_EXPLICIT_RULE_STACK,function(e){return t.shortRuleNameToFullName(t.RULE_STACK[e])})},t.prototype.SAVE_ERROR=function(t){if(s.exceptions.isRecognitionException(t))return t.context={ruleStack:this.getHumanReadableRuleStack(),ruleOccurrenceStack:p.cloneArr(this.RULE_OCCURRENCE_STACK)},this._errors.push(t),t;throw Error("Trying to save an Error which is not a RecognitionException")},t.prototype.BACKTRACK=function(t,e){return function(){this.isBackTrackingStack.push(1);var n=this.saveRecogState();try{return t.apply(this,e),!0}catch(t){if(s.exceptions.isRecognitionException(t))return!1;throw t}finally{this.reloadRecogState(n),this.isBackTrackingStack.pop()}}},t.prototype.CONSUME=function(t,e){return this.CONSUME1(t,e)},t.prototype.CONSUME1=function(t,e){return this.consumeInternal(t,1,e)},t.prototype.CONSUME2=function(t,e){return this.consumeInternal(t,2,e)},t.prototype.CONSUME3=function(t,e){return this.consumeInternal(t,3,e)},t.prototype.CONSUME4=function(t,e){return this.consumeInternal(t,4,e)},t.prototype.CONSUME5=function(t,e){return this.consumeInternal(t,5,e)},t.prototype.SUBRULE=function(t,e){return void 0===e&&(e=void 0),this.subruleInternal(t,1,e)},t.prototype.SUBRULE1=function(t,e){return void 0===e&&(e=void 0),this.subruleInternal(t,1,e)},t.prototype.SUBRULE2=function(t,e){return void 0===e&&(e=void 0),this.subruleInternal(t,2,e)},t.prototype.SUBRULE3=function(t,e){return void 0===e&&(e=void 0),this.subruleInternal(t,3,e)},t.prototype.SUBRULE4=function(t,e){return void 0===e&&(e=void 0),this.subruleInternal(t,4,e)},t.prototype.SUBRULE5=function(t,e){return void 0===e&&(e=void 0),this.subruleInternal(t,5,e)},t.prototype.OPTION=function(t){return this.OPTION1(t)},t.prototype.OPTION1=function(t){return this.optionInternal(t,1)},t.prototype.OPTION2=function(t){return this.optionInternal(t,2)},t.prototype.OPTION3=function(t){return this.optionInternal(t,3)},t.prototype.OPTION4=function(t){return this.optionInternal(t,4)},t.prototype.OPTION5=function(t){return this.optionInternal(t,5)},t.prototype.OR=function(t){return this.OR1(t)},t.prototype.OR1=function(t){return this.orInternal(t,1)},t.prototype.OR2=function(t){return this.orInternal(t,2)},t.prototype.OR3=function(t){return this.orInternal(t,3)},t.prototype.OR4=function(t){return this.orInternal(t,4)},t.prototype.OR5=function(t){return this.orInternal(t,5)},t.prototype.MANY=function(t){return this.MANY1(t)},t.prototype.MANY1=function(t){return this.manyInternal(1,t,[])},t.prototype.MANY2=function(t){return this.manyInternal(2,t,[])},t.prototype.MANY3=function(t){return this.manyInternal(3,t,[])},t.prototype.MANY4=function(t){return this.manyInternal(4,t,[])},t.prototype.MANY5=function(t){return this.manyInternal(5,t,[])},t.prototype.MANY_SEP=function(t){return this.MANY_SEP1(t)},t.prototype.MANY_SEP1=function(t){return this.manySepFirstInternal(1,t,{values:[],separators:[]})},t.prototype.MANY_SEP2=function(t){return this.manySepFirstInternal(2,t,{values:[],separators:[]})},t.prototype.MANY_SEP3=function(t){return this.manySepFirstInternal(3,t,{values:[],separators:[]})},t.prototype.MANY_SEP4=function(t){return this.manySepFirstInternal(4,t,{values:[],separators:[]})},t.prototype.MANY_SEP5=function(t){return this.manySepFirstInternal(5,t,{values:[],separators:[]})},t.prototype.AT_LEAST_ONE=function(t){return this.AT_LEAST_ONE1(t)},t.prototype.AT_LEAST_ONE1=function(t){return this.atLeastOneInternal(1,t,[])},t.prototype.AT_LEAST_ONE2=function(t){return this.atLeastOneInternal(2,t,[])},t.prototype.AT_LEAST_ONE3=function(t){return this.atLeastOneInternal(3,t,[])},t.prototype.AT_LEAST_ONE4=function(t){return this.atLeastOneInternal(4,t,[])},t.prototype.AT_LEAST_ONE5=function(t){return this.atLeastOneInternal(5,t,[])},t.prototype.AT_LEAST_ONE_SEP=function(t){return this.AT_LEAST_ONE_SEP1(t)},t.prototype.AT_LEAST_ONE_SEP1=function(t){return this.atLeastOneSepFirstInternal(1,t,{values:[],separators:[]})},t.prototype.AT_LEAST_ONE_SEP2=function(t){return this.atLeastOneSepFirstInternal(2,t,{values:[],separators:[]})},t.prototype.AT_LEAST_ONE_SEP3=function(t){return this.atLeastOneSepFirstInternal(3,t,{values:[],separators:[]})},t.prototype.AT_LEAST_ONE_SEP4=function(t){return this.atLeastOneSepFirstInternal(4,t,{values:[],separators:[]})},t.prototype.AT_LEAST_ONE_SEP5=function(t){return this.atLeastOneSepFirstInternal(5,t,{values:[],separators:[]})},t.prototype.RULE=function(t,e,n){void 0===n&&(n=L);var r=l.validateRuleName(t);if(r=r.concat(l.validateRuleDoesNotAlreadyExist(t,this.definedRulesNames,this.className)),this.definedRulesNames.push(t),this.definitionErrors.push.apply(this.definitionErrors,r),this._productions.containsKey(t)){var i=o.getProductionsForClass(this.className),a=i.get(t);p.isUndefined(a)||this._productions.put(t,a)}else{var s=T.buildTopProduction(e.toString(),t,this.tokensMap);this._productions.put(t,s)}var c=this.defineRule(t,e,n);return this[t]=c,c},t.prototype.OVERRIDE_RULE=function(t,e,n){void 0===n&&(n=L);var r=l.validateRuleName(t);r=r.concat(l.validateRuleIsOverridden(t,this.definedRulesNames,this.className)),this.definitionErrors.push.apply(this.definitionErrors,r);var i=o.getProductionOverriddenForClass(this.className);if(i.containsKey(t)){var a=o.getProductionsForClass(this.className);this._productions.put(t,a.get(t))}else{i.put(t,!0);var s=T.buildTopProduction(e.toString(),t,this.tokensMap);this._productions.put(t,s)}return this.defineRule(t,e,n)},t.prototype.ruleInvocationStateUpdate=function(t,e,n){this.RULE_OCCURRENCE_STACK.push(n),this.RULE_STACK.push(t),this.cstInvocationStateUpdate(e,t)},t.prototype.ruleFinallyStateUpdate=function(){if(this.RULE_STACK.pop(),this.RULE_OCCURRENCE_STACK.pop(),this.cstFinallyStateUpdate(),0===this.RULE_STACK.length&&!this.isAtEndOfInput()){var t=this.LA(1),e=this.errorMessageProvider.buildNotAllInputParsedMessage({firstRedundant:t,ruleName:this.getCurrRuleFullName()});this.SAVE_ERROR(new s.exceptions.NotAllInputParsedException(e,t))}},t.prototype.nestedRuleInvocationStateUpdate=function(t,e){this.RULE_OCCURRENCE_STACK.push(1),this.RULE_STACK.push(e),this.cstNestedInvocationStateUpdate(t,e)},t.prototype.nestedRuleFinallyStateUpdate=function(){this.RULE_STACK.pop(),this.RULE_OCCURRENCE_STACK.pop(),this.cstNestedFinallyStateUpdate()},t.prototype.getTokenToInsert=function(t){var e=h.createTokenInstance(t,"",NaN,NaN,NaN,NaN,NaN,NaN);return e.isInsertedInRecovery=!0,e},t.prototype.canTokenTypeBeInsertedInRecovery=function(t){return!0},t.prototype.getCurrentGrammarPath=function(t,e){return{ruleStack:this.getHumanReadableRuleStack(),occurrenceStack:p.cloneArr(this.RULE_OCCURRENCE_STACK),lastTok:t,lastTokOccurrence:e}},t.prototype.getNextPossibleTokenTypes=function(t){var e=p.first(t.ruleStack),n=this.getGAstProductions(),r=n.get(e);return new E.NextAfterTokenWalker(r,t).startWalking()},t.prototype.subruleInternal=function(t,e,n){var r=t.call(this,e,n);return this.cstPostNonTerminal(r,t.ruleName),r},t.prototype.consumeInternal=function(t,e,n){var r;try{var i=this.LA(1);if(!0!==this.tokenMatcher(i,t)){var o=void 0;throw o=void 0!==n&&n.ERR_MSG?n.ERR_MSG:this.errorMessageProvider.buildMismatchTokenMessage({expected:t,actual:i,ruleName:this.getCurrRuleFullName()}),this.SAVE_ERROR(new s.exceptions.MismatchedTokenException(o,i))}this.consumeToken(),r=i}catch(n){if(!this.recoveryEnabled||"MismatchedTokenException"!==n.name||this.isBackTracking())throw n;var a=this.getFollowsForInRuleRecovery(t,e);try{r=this.tryInRuleRecovery(t,a)}catch(t){throw t.name===O?n:t}}return this.cstPostTerminal(t,r),r},t.prototype.saveRecogState=function(){var t=this.errors,e=p.cloneArr(this.RULE_STACK);return{errors:t,lexerState:this.exportLexerState(),RULE_STACK:e,CST_STACK:this.CST_STACK,LAST_EXPLICIT_RULE_STACK:this.LAST_EXPLICIT_RULE_STACK}},t.prototype.reloadRecogState=function(t){this.errors=t.errors,this.importLexerState(t.lexerState),this.RULE_STACK=t.RULE_STACK},t.prototype.defineRule=function(t,e,n){function r(t){try{return!0===this.outputCst?(e.apply(this,t),this.CST_STACK[this.CST_STACK.length-1]):e.apply(this,t)}catch(t){var n=1===this.RULE_STACK.length,r=i&&!this.isBackTracking()&&this.recoveryEnabled;if(s.exceptions.isRecognitionException(t)){if(r){var a=this.findReSyncTokenType();if(this.isInCurrentRuleReSyncSet(a)){if(t.resyncedTokens=this.reSyncTo(a),this.outputCst){var c=this.CST_STACK[this.CST_STACK.length-1];return c.recoveredNode=!0,c}return o()}if(this.outputCst){var u=this.getLastExplicitRuleShortNameNoCst(),l=this.shortRuleNameToFull.get(u),c=this.CST_STACK[this.CST_STACK.length-1];c.recoveredNode=!0,this.cstPostNonTerminalRecovery(c,l)}throw t}if(n)return this.moveToTerminatedState(),o();throw t}throw t}finally{this.ruleFinallyStateUpdate()}}if(this.selfAnalysisDone)throw Error("Grammar rule <"+t+"> may not be defined after the 'performSelfAnalysis' method has been called'\nMake sure that all grammar rule definitions are done before 'performSelfAnalysis' is called.");var i=p.has(n,"resyncEnabled")?n.resyncEnabled:L.resyncEnabled,o=p.has(n,"recoveryValueFunc")?n.recoveryValueFunc:L.recoveryValueFunc,a=this.ruleShortNameIdx<<R.BITS_FOR_METHOD_IDX+R.BITS_FOR_OCCURRENCE_IDX;this.ruleShortNameIdx++,this.shortRuleNameToFull.put(a,t),this.fullRuleNameToShort.put(t,a);var c;c=function(e,n){return void 0===e&&(e=1),this.ruleInvocationStateUpdate(a,t,e),r.call(this,n)};return c.ruleName=t,c},t.prototype.tryInRepetitionRecovery=function(t,e,n,r){for(var i=this,o=this.findReSyncTokenType(),a=this.exportLexerState(),c=[],u=!1,l=this.LA(1),f=this.LA(1),h=function(){var t=i.errorMessageProvider.buildMismatchTokenMessage({expected:r,actual:l,ruleName:i.getCurrRuleFullName()}),e=new s.exceptions.MismatchedTokenException(t,l);e.resyncedTokens=p.dropRight(c),i.SAVE_ERROR(e)};!u;){if(this.tokenMatcher(f,r))return void h();if(n.call(this))return h(),void t.apply(this,e);this.tokenMatcher(f,o)?u=!0:(f=this.SKIP_TOKEN(),this.addToResyncTokens(f,c))}this.importLexerState(a)},t.prototype.shouldInRepetitionRecoveryBeTried=function(t,e){return void 0!==t&&void 0!==e&&(!this.tokenMatcher(this.LA(1),t)&&(!this.isBackTracking()&&!this.canPerformInRuleRecovery(t,this.getFollowsForInRuleRecovery(t,e))))},t.prototype.getFollowsForInRuleRecovery=function(t,e){var n=this.getCurrentGrammarPath(t,e);return this.getNextPossibleTokenTypes(n)},t.prototype.tryInRuleRecovery=function(t,e){if(this.canRecoverWithSingleTokenInsertion(t,e)){return this.getTokenToInsert(t)}if(this.canRecoverWithSingleTokenDeletion(t)){var n=this.SKIP_TOKEN();return this.consumeToken(),n}throw new i("sad sad panda")},t.prototype.canPerformInRuleRecovery=function(t,e){return this.canRecoverWithSingleTokenInsertion(t,e)||this.canRecoverWithSingleTokenDeletion(t)},t.prototype.canRecoverWithSingleTokenInsertion=function(t,e){var n=this;if(!this.canTokenTypeBeInsertedInRecovery(t))return!1;if(p.isEmpty(e))return!1;var r=this.LA(1);return void 0!==p.find(e,function(t){return n.tokenMatcher(r,t)})},t.prototype.canRecoverWithSingleTokenDeletion=function(t){return this.tokenMatcher(this.LA(2),t)},t.prototype.isInCurrentRuleReSyncSet=function(t){var e=this.getCurrFollowKey(),n=this.getFollowSetFromFollowKey(e);return p.contains(n,t)},t.prototype.findReSyncTokenType=function(){for(var t=this.flattenFollowSet(),e=this.LA(1),n=2;;){var r=e.tokenType;if(p.contains(t,r))return r;e=this.LA(n),n++}},t.prototype.getCurrFollowKey=function(){if(1===this.RULE_STACK.length)return P;var t=this.getLastExplicitRuleShortName(),e=this.getPreviousExplicitRuleShortName(),n=this.getPreviousExplicitRuleOccurenceIndex();return{ruleName:this.shortRuleNameToFullName(t),idxInCallingRule:n,inRule:this.shortRuleNameToFullName(e)}},t.prototype.buildFullFollowKeyStack=function(){var t=this,e=this.RULE_STACK,n=this.RULE_OCCURRENCE_STACK;return p.isEmpty(this.LAST_EXPLICIT_RULE_STACK)||(e=p.map(this.LAST_EXPLICIT_RULE_STACK,function(e){return t.RULE_STACK[e]}),n=p.map(this.LAST_EXPLICIT_RULE_STACK,function(e){return t.RULE_OCCURRENCE_STACK[e]})),p.map(e,function(r,i){return 0===i?P:{ruleName:t.shortRuleNameToFullName(r),idxInCallingRule:n[i],inRule:t.shortRuleNameToFullName(e[i-1])}})},t.prototype.flattenFollowSet=function(){var t=this,e=p.map(this.buildFullFollowKeyStack(),function(e){return t.getFollowSetFromFollowKey(e)});return p.flatten(e)},t.prototype.getFollowSetFromFollowKey=function(t){if(t===P)return[h.EOF];var e=t.ruleName+t.idxInCallingRule+m.IN+t.inRule;return o.getResyncFollowsForClass(this.className).get(e)},t.prototype.addToResyncTokens=function(t,e){return this.tokenMatcher(t,h.EOF)||e.push(t),e},t.prototype.reSyncTo=function(t){for(var e=[],n=this.LA(1);!1===this.tokenMatcher(n,t);)n=this.SKIP_TOKEN(),this.addToResyncTokens(n,e);return p.dropRight(e)},t.prototype.attemptInRepetitionRecovery=function(t,e,n,r,i,o){var a=this.getKeyForAutomaticLookahead(r,i),s=this.firstAfterRepMap.get(a);if(void 0===s){var c=this.getCurrRuleFullName();s=new o(this.getGAstProductions().get(c),i).startWalking(),this.firstAfterRepMap.put(a,s)}var u=s.token,l=s.occurrence,p=s.isEndOfRule;1===this.RULE_STACK.length&&p&&void 0===u&&(u=h.EOF,l=1),this.shouldInRepetitionRecoveryBeTried(u,l)&&this.tryInRepetitionRecovery(t,e,n,u)},t.prototype.cstNestedInvocationStateUpdate=function(t,e){var n=this.cstDictDefForRule.get(e);this.CST_STACK.push({name:t,fullName:this.shortRuleNameToFull.get(this.getLastExplicitRuleShortName())+t,children:n()})},t.prototype.cstInvocationStateUpdate=function(t,e){this.LAST_EXPLICIT_RULE_STACK.push(this.RULE_STACK.length-1);var n=this.cstDictDefForRule.get(e);this.CST_STACK.push({name:t,children:n()})},t.prototype.cstFinallyStateUpdate=function(){this.LAST_EXPLICIT_RULE_STACK.pop(),this.CST_STACK.pop()},t.prototype.cstNestedFinallyStateUpdate=function(){this.CST_STACK.pop()},t.prototype.optionInternal=function(t,e){var n=this.getKeyForAutomaticLookahead(R.OPTION_IDX,e),r=this.nestedRuleBeforeClause(t,n);try{return this.optionInternalLogic(t,e,n)}finally{void 0!==r&&this.nestedRuleFinallyClause(n,r)}},t.prototype.optionInternalNoCst=function(t,e){var n=this.getKeyForAutomaticLookahead(R.OPTION_IDX,e);return this.optionInternalLogic(t,e,n)},t.prototype.optionInternalLogic=function(t,e,n){var r,i,o=this,a=this.getLookaheadFuncForOption(n,e);if(void 0!==t.DEF){if(r=t.DEF,void 0!==(i=t.GATE)){var s=a;a=function(){return i.call(o)&&s.call(o)}}}else r=t;if(!0===a.call(this))return r.call(this)},t.prototype.atLeastOneInternal=function(t,e,n){var r=this.getKeyForAutomaticLookahead(R.AT_LEAST_ONE_IDX,t),i=this.nestedRuleBeforeClause(e,r);try{return this.atLeastOneInternalLogic(t,e,n,r)}finally{void 0!==i&&this.nestedRuleFinallyClause(r,i)}},t.prototype.atLeastOneInternalNoCst=function(t,e,n){var r=this.getKeyForAutomaticLookahead(R.AT_LEAST_ONE_IDX,t);return this.atLeastOneInternalLogic(t,e,n,r)},t.prototype.atLeastOneInternalLogic=function(t,e,n,r){var i,o,a=this,s=this.getLookaheadFuncForAtLeastOne(r,t);if(void 0!==e.DEF){if(i=e.DEF,void 0!==(o=e.GATE)){var c=s;s=function(){return o.call(a)&&c.call(a)}}}else i=e;if(!0!==s.call(this))throw this.raiseEarlyExitException(t,d.PROD_TYPE.REPETITION_MANDATORY,e.ERR_MSG);for(n.push(i.call(this));!0===s.call(this);)n.push(i.call(this));return this.attemptInRepetitionRecovery(this.atLeastOneInternal,[t,e,n],s,R.AT_LEAST_ONE_IDX,t,E.NextTerminalAfterAtLeastOneWalker),n},t.prototype.atLeastOneSepFirstInternal=function(t,e,n){var r=this.getKeyForAutomaticLookahead(R.AT_LEAST_ONE_SEP_IDX,t),i=this.nestedRuleBeforeClause(e,r);try{return this.atLeastOneSepFirstInternalLogic(t,e,n,r)}finally{void 0!==i&&this.nestedRuleFinallyClause(r,i)}},t.prototype.atLeastOneSepFirstInternalNoCst=function(t,e,n){var r=this.getKeyForAutomaticLookahead(R.AT_LEAST_ONE_SEP_IDX,t);return this.atLeastOneSepFirstInternalLogic(t,e,n,r)},t.prototype.atLeastOneSepFirstInternalLogic=function(t,e,n,r){var i=this,o=e.DEF,a=e.SEP,s=this.getLookaheadFuncForAtLeastOneSep(r,t),c=n.values,u=n.separators;if(!0!==s.call(this))throw this.raiseEarlyExitException(t,d.PROD_TYPE.REPETITION_MANDATORY_WITH_SEPARATOR,e.ERR_MSG);c.push(o.call(this));for(var l=function(){return i.tokenMatcher(i.LA(1),a)};!0===this.tokenMatcher(this.LA(1),a);)u.push(this.CONSUME(a)),c.push(o.call(this));return this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[t,a,l,o,E.NextTerminalAfterAtLeastOneSepWalker,n],l,R.AT_LEAST_ONE_SEP_IDX,t,E.NextTerminalAfterAtLeastOneSepWalker),n},t.prototype.manyInternal=function(t,e,n){var r=this.getKeyForAutomaticLookahead(R.MANY_IDX,t),i=this.nestedRuleBeforeClause(e,r);try{return this.manyInternalLogic(t,e,n,r)}finally{void 0!==i&&this.nestedRuleFinallyClause(r,i)}},t.prototype.manyInternalNoCst=function(t,e,n){var r=this.getKeyForAutomaticLookahead(R.MANY_IDX,t);return this.manyInternalLogic(t,e,n,r)},t.prototype.manyInternalLogic=function(t,e,n,r){var i,o,a=this,s=this.getLookaheadFuncForMany(r,t);if(void 0!==e.DEF){if(i=e.DEF,void 0!==(o=e.GATE)){var c=s;s=function(){return o.call(a)&&c.call(a)}}}else i=e;for(;s.call(this);)n.push(i.call(this));return this.attemptInRepetitionRecovery(this.manyInternal,[t,e,n],s,R.MANY_IDX,t,E.NextTerminalAfterManyWalker),n},t.prototype.manySepFirstInternal=function(t,e,n){var r=this.getKeyForAutomaticLookahead(R.MANY_SEP_IDX,t),i=this.nestedRuleBeforeClause(e,r);try{return this.manySepFirstInternalLogic(t,e,n,r)}finally{void 0!==i&&this.nestedRuleFinallyClause(r,i)}},t.prototype.manySepFirstInternalNoCst=function(t,e,n){var r=this.getKeyForAutomaticLookahead(R.MANY_SEP_IDX,t);return this.manySepFirstInternalLogic(t,e,n,r)},t.prototype.manySepFirstInternalLogic=function(t,e,n,r){var i=this,o=e.DEF,a=e.SEP,s=this.getLookaheadFuncForManySep(r,t),c=n.values,u=n.separators;if(!0===s.call(this)){c.push(o.call(this));for(var l=function(){return i.tokenMatcher(i.LA(1),a)};!0===this.tokenMatcher(this.LA(1),a);)u.push(this.CONSUME(a)),c.push(o.call(this));this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[t,a,l,o,E.NextTerminalAfterManySepWalker,n],l,R.MANY_SEP_IDX,t,E.NextTerminalAfterManySepWalker)}return n},t.prototype.repetitionSepSecondInternal=function(t,e,n,r,i,o){for(;n();)o.separators.push(this.CONSUME(e)),o.values.push(r.call(this));this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[t,e,n,r,i,o],n,R.AT_LEAST_ONE_SEP_IDX,t,i)},t.prototype.orInternalNoCst=function(t,e){var n=p.isArray(t)?t:t.DEF,r=this.getLookaheadFuncForOr(e,n),i=r.call(this,n);if(void 0!==i){return n[i].ALT.call(this)}this.raiseNoAltException(e,t.ERR_MSG)},t.prototype.orInternal=function(t,e){var n=this.getKeyForAutomaticLookahead(R.OR_IDX,e),r=this.nestedRuleBeforeClause(t,n);try{var i=p.isArray(t)?t:t.DEF,o=this.getLookaheadFuncForOr(e,i),a=o.call(this,i);if(void 0!==a){var s=i[a],c=this.nestedAltBeforeClause(s,e,R.OR_IDX,a);try{return s.ALT.call(this)}finally{void 0!==c&&this.nestedRuleFinallyClause(c.shortName,c.nestedName)}}this.raiseNoAltException(e,t.ERR_MSG)}finally{void 0!==r&&this.nestedRuleFinallyClause(n,r)}},t.prototype.getKeyForAutomaticLookahead=function(t,e){var n=this.getLastExplicitRuleShortName();return R.getKeyForAutomaticLookahead(n,t,e)},t.prototype.getLookaheadFuncForOr=function(t,e){var n=this.getKeyForAutomaticLookahead(R.OR_IDX,t),r=this.classLAFuncs.get(n);if(void 0===r){var i=this.getCurrRuleFullName(),o=this.getGAstProductions().get(i),a=p.some(e,function(t){return p.isFunction(t.GATE)});return r=d.buildLookaheadFuncForOr(t,o,this.maxLookahead,a,this.dynamicTokensEnabled,this.lookAheadBuilderForAlternatives),this.classLAFuncs.put(n,r),r}return r},t.prototype.getLookaheadFuncForOption=function(t,e){return this.getLookaheadFuncFor(t,e,this.maxLookahead,d.PROD_TYPE.OPTION)},t.prototype.getLookaheadFuncForMany=function(t,e){return this.getLookaheadFuncFor(t,e,this.maxLookahead,d.PROD_TYPE.REPETITION)},t.prototype.getLookaheadFuncForManySep=function(t,e){return this.getLookaheadFuncFor(t,e,this.maxLookahead,d.PROD_TYPE.REPETITION_WITH_SEPARATOR)},t.prototype.getLookaheadFuncForAtLeastOne=function(t,e){return this.getLookaheadFuncFor(t,e,this.maxLookahead,d.PROD_TYPE.REPETITION_MANDATORY)},t.prototype.getLookaheadFuncForAtLeastOneSep=function(t,e){return this.getLookaheadFuncFor(t,e,this.maxLookahead,d.PROD_TYPE.REPETITION_MANDATORY_WITH_SEPARATOR)},t.prototype.raiseNoAltException=function(t,e){for(var n=this.getCurrRuleFullName(),r=this.getGAstProductions().get(n),i=d.getLookaheadPathsForOr(t,r,this.maxLookahead),o=[],a=1;a<this.maxLookahead;a++)o.push(this.LA(a));var c=this.errorMessageProvider.buildNoViableAltMessage({expectedPathsPerAlt:i,actual:o,customUserDescription:e,ruleName:this.getCurrRuleFullName()});throw this.SAVE_ERROR(new s.exceptions.NoViableAltException(c,this.LA(1)))},t.prototype.getLookaheadFuncFor=function(t,e,n,r){var i=this.classLAFuncs.get(t);if(void 0===i){var o=this.getCurrRuleFullName(),a=this.getGAstProductions().get(o);return i=d.buildLookaheadFuncForOptionalProd(e,a,n,this.dynamicTokensEnabled,r,this.lookAheadBuilderForOptional),this.classLAFuncs.put(t,i),i}return i},t.prototype.raiseEarlyExitException=function(t,e,n){for(var r=this.getCurrRuleFullName(),i=this.getGAstProductions().get(r),o=d.getLookaheadPathsForOptionalProd(t,i,e,this.maxLookahead),a=o[0],c=[],u=1;u<this.maxLookahead;u++)c.push(this.LA(u));var l=this.errorMessageProvider.buildEarlyExitMessage({expectedIterationPaths:a,actual:c,previous:this.LA(0),customUserDescription:n,ruleName:r});throw this.SAVE_ERROR(new s.exceptions.EarlyExitException(l,this.LA(1),this.LA(0)))},t.prototype.getLastExplicitRuleShortName=function(){var t=this.LAST_EXPLICIT_RULE_STACK[this.LAST_EXPLICIT_RULE_STACK.length-1];return this.RULE_STACK[t]},t.prototype.getLastExplicitRuleShortNameNoCst=function(){var t=this.RULE_STACK;return t[t.length-1]},t.prototype.getPreviousExplicitRuleShortName=function(){var t=this.LAST_EXPLICIT_RULE_STACK[this.LAST_EXPLICIT_RULE_STACK.length-2];return this.RULE_STACK[t]},t.prototype.getPreviousExplicitRuleShortNameNoCst=function(){var t=this.RULE_STACK;return t[t.length-2]},t.prototype.getPreviousExplicitRuleOccurenceIndex=function(){var t=this.LAST_EXPLICIT_RULE_STACK[this.LAST_EXPLICIT_RULE_STACK.length-2];return this.RULE_OCCURRENCE_STACK[t]},t.prototype.getPreviousExplicitRuleOccurenceIndexNoCst=function(){var t=this.RULE_OCCURRENCE_STACK;return t[t.length-2]},t.prototype.nestedRuleBeforeClause=function(t,e){var n;return void 0!==t.NAME?(n=t.NAME,this.nestedRuleInvocationStateUpdate(n,e),n):void 0},t.prototype.nestedAltBeforeClause=function(t,e,n,r){var i,o=this.getLastExplicitRuleShortName(),a=R.getKeyForAltIndex(o,n,e,r);return void 0!==t.NAME?(i=t.NAME,this.nestedRuleInvocationStateUpdate(i,a),{shortName:a,nestedName:i}):void 0},t.prototype.nestedRuleFinallyClause=function(t,e){var n=this.CST_STACK,r=n[n.length-1];this.nestedRuleFinallyStateUpdate();var i=n[n.length-1];g.addNoneTerminalToCst(i,e,r)},t.prototype.cstPostTerminal=function(t,e){var n=t.tokenName,r=this.CST_STACK[this.CST_STACK.length-1];g.addTerminalToCst(r,e,n)},t.prototype.cstPostNonTerminal=function(t,e){g.addNoneTerminalToCst(this.CST_STACK[this.CST_STACK.length-1],e,t)},t.prototype.cstPostNonTerminalRecovery=function(t,e){g.addNoneTerminalToCst(this.CST_STACK[this.CST_STACK.length-2],e,t)},Object.defineProperty(t.prototype,"input",{get:function(){return this.tokVector},set:function(t){this.reset(),this.tokVector=t,this.tokVectorLength=t.length},enumerable:!0,configurable:!0}),t.prototype.SKIP_TOKEN=function(){return this.currIdx<=this.tokVector.length-2?(this.consumeToken(),this.LA(1)):e.END_OF_FILE},t.prototype.LA=function(t){return this.currIdx+t<0||this.tokVectorLength<=this.currIdx+t?e.END_OF_FILE:this.tokVector[this.currIdx+t]},t.prototype.consumeToken=function(){this.currIdx++},t.prototype.exportLexerState=function(){return this.currIdx},t.prototype.importLexerState=function(t){this.currIdx=t},t.prototype.resetLexerState=function(){this.currIdx=-1},t.prototype.moveToTerminatedState=function(){this.currIdx=this.tokVector.length-1},t.prototype.lookAheadBuilderForOptional=function(t,e,n){return d.buildSingleAlternativeLookaheadFunction(t,e,n)},t.prototype.lookAheadBuilderForAlternatives=function(t,e,n,r){return d.buildAlternativesLookAheadFunc(t,e,n,r)},t.NO_RESYNC=!1,t.DEFER_DEFINITION_ERRORS_HANDLING=!1,t}();e.Parser=k,i.prototype=Error.prototype},function(t,e,n){"use strict";function r(t){return l(t,e.CLASS_TO_GRAMMAR_PRODUCTIONS)}function i(t){return l(t,e.CLASS_TO_RESYNC_FOLLOW_SETS)}function o(t,n){e.CLASS_TO_RESYNC_FOLLOW_SETS.put(t,n)}function a(t){return l(t,e.CLASS_TO_LOOKAHEAD_FUNCS)}function s(t){return l(t,e.CLASS_TO_FIRST_AFTER_REPETITION)}function c(t){return l(t,e.CLASS_TO_PRODUCTION_OVERRIDEN)}function u(t){return l(t,e.CLASS_TO_CST_DICT_DEF_PER_RULE)}function l(t,e){var n=e.get(t);return void 0===n&&(e.put(t,new f.HashTable),n=e.get(t)),n}function p(){var e=h.filter(h.values(t.exports),function(t){return t instanceof f.HashTable});h.forEach(e,function(t){return t.clear()})}Object.defineProperty(e,"__esModule",{value:!0});var f=n(3),h=n(0);e.CLASS_TO_DEFINITION_ERRORS=new f.HashTable,e.CLASS_TO_SELF_ANALYSIS_DONE=new f.HashTable,e.CLASS_TO_GRAMMAR_PRODUCTIONS=new f.HashTable,e.getProductionsForClass=r,e.CLASS_TO_RESYNC_FOLLOW_SETS=new f.HashTable,e.getResyncFollowsForClass=i,e.setResyncFollowsForClass=o,e.CLASS_TO_LOOKAHEAD_FUNCS=new f.HashTable,e.getLookaheadFuncsForClass=a,e.CLASS_TO_FIRST_AFTER_REPETITION=new f.HashTable,e.getFirstAfterRepForClass=s,e.CLASS_TO_PRODUCTION_OVERRIDEN=new f.HashTable,e.getProductionOverriddenForClass=c,e.CLASS_TO_CST_DICT_DEF_PER_RULE=new f.HashTable,e.getCstDictDefPerRuleForClass=u,e.CLASS_TO_BASE_CST_VISITOR=new f.HashTable,e.CLASS_TO_BASE_CST_VISITOR_WITH_DEFAULTS=new f.HashTable,e.CLASS_TO_ALL_RULE_NAMES=new f.HashTable,e.MAX_OCCURRENCE_INDEX=5,e.clearCache=p},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(22),i=n(0),o=n(4);!function(t){t[t.MISSING_PATTERN=0]="MISSING_PATTERN",t[t.INVALID_PATTERN=1]="INVALID_PATTERN",t[t.EOI_ANCHOR_FOUND=2]="EOI_ANCHOR_FOUND",t[t.UNSUPPORTED_FLAGS_FOUND=3]="UNSUPPORTED_FLAGS_FOUND",t[t.DUPLICATE_PATTERNS_FOUND=4]="DUPLICATE_PATTERNS_FOUND",t[t.INVALID_GROUP_TYPE_FOUND=5]="INVALID_GROUP_TYPE_FOUND",t[t.PUSH_MODE_DOES_NOT_EXIST=6]="PUSH_MODE_DOES_NOT_EXIST",t[t.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE=7]="MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE",t[t.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY=8]="MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY",t[t.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST=9]="MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST",t[t.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED=10]="LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED",t[t.SOI_ANCHOR_FOUND=11]="SOI_ANCHOR_FOUND",t[t.EMPTY_MATCH_PATTERN=12]="EMPTY_MATCH_PATTERN",t[t.NO_LINE_BREAKS_FLAGS=13]="NO_LINE_BREAKS_FLAGS",t[t.UNREACHABLE_PATTERN=14]="UNREACHABLE_PATTERN"}(e.LexerDefinitionErrorType||(e.LexerDefinitionErrorType={}));var a={deferDefinitionErrorsHandling:!1,positionTracking:"full",lineTerminatorsPattern:/\n|\r\n?/g};Object.freeze(a);var s=function(){function t(t,e){void 0===e&&(e=a);var n=this;if(this.lexerDefinition=t,this.lexerDefinitionErrors=[],this.patternIdxToConfig={},this.modes=[],this.emptyGroups={},this.config=void 0,this.trackStartLines=!0,this.trackEndLines=!0,this.hasCustom=!1,"boolean"==typeof e)throw Error("The second argument to the Lexer constructor is now an ILexerConfig Object.\na boolean 2nd argument is no longer supported");this.config=i.merge(a,e),this.config.lineTerminatorsPattern===a.lineTerminatorsPattern&&(this.config.lineTerminatorsPattern=r.LineTerminatorOptimizedTester),this.trackStartLines=/full|onlyStart/i.test(this.config.positionTracking),this.trackEndLines=/full/i.test(this.config.positionTracking);var s,c=!0;i.isArray(t)?(s={modes:{}},s.modes[r.DEFAULT_MODE]=i.cloneArr(t),s[r.DEFAULT_MODE]=r.DEFAULT_MODE):(c=!1,s=i.cloneObj(t)),this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(r.performRuntimeChecks(s,this.trackStartLines)),s.modes=s.modes?s.modes:{},i.forEach(s.modes,function(t,e){s.modes[e]=i.reject(t,function(t){return i.isUndefined(t)})});var u=i.keys(s.modes);if(i.forEach(s.modes,function(t,e){if(n.modes.push(e),n.lexerDefinitionErrors=n.lexerDefinitionErrors.concat(r.validatePatterns(t,u)),i.isEmpty(n.lexerDefinitionErrors)){o.augmentTokenTypes(t);var a=r.analyzeTokenTypes(t);n.patternIdxToConfig[e]=a.patternIdxToConfig,n.emptyGroups=i.merge(n.emptyGroups,a.emptyGroups),n.hasCustom=a.hasCustom||n.hasCustom}}),this.defaultMode=s.defaultMode,!i.isEmpty(this.lexerDefinitionErrors)&&!this.config.deferDefinitionErrorsHandling){var l=i.map(this.lexerDefinitionErrors,function(t){return t.message}),p=l.join("-----------------------\n");throw new Error("Errors detected in definition of Lexer:\n"+p)}if(r.SUPPORT_STICKY?(this.chopInput=i.IDENTITY,this.match=this.matchWithTest):(this.updateLastIndex=i.NOOP,this.match=this.matchWithExec),c&&(this.handleModes=i.NOOP),!1===this.trackStartLines&&(this.computeNewColumn=i.IDENTITY),!1===this.trackEndLines&&(this.updateTokenEndLineColumnLocation=i.NOOP),/full/i.test(this.config.positionTracking))this.createTokenInstance=this.createFullToken;else if(/onlyStart/i.test(this.config.positionTracking))this.createTokenInstance=this.createStartOnlyToken;else{if(!/onlyOffset/i.test(this.config.positionTracking))throw Error('Invalid <positionTracking> config option: "'+this.config.positionTracking+'"');this.createTokenInstance=this.createOffsetOnlyToken}this.hasCustom?this.addToken=this.addTokenUsingPush:this.addToken=this.addTokenUsingMemberAccess}return t.prototype.tokenize=function(t,e){if(void 0===e&&(e=this.defaultMode),!i.isEmpty(this.lexerDefinitionErrors)){var n=i.map(this.lexerDefinitionErrors,function(t){return t.message}),r=n.join("-----------------------\n");throw new Error("Unable to Tokenize because Errors detected in definition of Lexer:\n"+r)}return this.tokenizeInternal(t,e)},t.prototype.tokenizeInternal=function(t,e){function n(t){C.push(t),x=this.patternIdxToConfig[t],k=x.length}var o,a,s,c,u,l,p,f,h,d,T,E,m=this,v=t,y=v.length,_=0,g=0,R=this.hasCustom?0:Math.floor(t.length/10),A=new Array(R),N=[],S=this.trackStartLines?1:void 0,O=this.trackStartLines?1:void 0,I=r.cloneEmptyGroups(this.emptyGroups),L=this.trackStartLines,P=this.config.lineTerminatorsPattern,k=0,x=[],C=[],M=function(t){if(1===C.length&&void 0===t.tokenType.PUSH_MODE){var e="Unable to pop Lexer Mode after encountering Token ->"+t.image+"<- The Mode Stack is empty";N.push({offset:t.startOffset,line:void 0!==t.startLine?t.startLine:void 0,column:void 0!==t.startColumn?t.startColumn:void 0,length:t.image.length,message:e})}else{C.pop();var n=i.last(C);x=m.patternIdxToConfig[n],k=x.length}};n.call(this,e);for(var D;_<y;){for(u=null,o=0;o<k;o++){D=x[o];var F=D.pattern,w=D.short;if(!1!==w?v.charCodeAt(_)===w&&(u=F):!0===D.isCustom?(E=F.exec(v,_,A,I),u=null!==E?E[0]:E):(this.updateLastIndex(F,_),u=this.match(F,t,_)),null!==u){if(void 0!==(c=D.longerAlt)){var U=x[c],b=U.pattern;!0===U.isCustom?(E=b.exec(v,_,A,I),s=null!==E?E[0]:E):(this.updateLastIndex(b,_),s=this.match(b,t,_)),s&&s.length>u.length&&(u=s,D=U)}break}}if(null!==u){if(l=u.length,p=D.group,void 0!==p&&(f=D.tokenTypeIdx,h=this.createTokenInstance(u,_,f,D.tokenType,S,O,l),!1===p?g=this.addToken(A,g,h):I[p].push(h)),t=this.chopInput(t,l),_+=l,O=this.computeNewColumn(O,l),!0===L&&!0===D.canLineTerminator){var K=0,W=void 0,B=void 0;P.lastIndex=0;do{!0===(W=P.test(u))&&(B=P.lastIndex-1,K++)}while(W);0!==K&&(S+=K,O=l-B,this.updateTokenEndLineColumnLocation(h,p,B,K,S,O,l))}this.handleModes(o,D,M,n,h)}else{for(var V=_,G=S,j=O,H=!1;!H&&_<y;)for(v.charCodeAt(_),t=this.chopInput(t,1),_++,a=0;a<k;a++){var Y=x[a],F=Y.pattern,w=Y.short;if(!1!==w?v.charCodeAt(_)===w&&(H=!0):!0===Y.isCustom?H=null!==F.exec(v,_,A,I):(this.updateLastIndex(F,_),H=null!==F.exec(t)),!0===H)break}d=_-V,T="unexpected character: ->"+v.charAt(V)+"<- at offset: "+V+", skipped "+(_-V)+" characters.",N.push({offset:V,line:G,column:j,length:d,message:T})}}return this.hasCustom||(A.length=g),{tokens:A,groups:I,errors:N}},t.prototype.handleModes=function(t,e,n,r,i){if(!0===e.pop){var o=e.push;n(i),void 0!==o&&r.call(this,o)}else void 0!==e.push&&r.call(this,e.push)},t.prototype.chopInput=function(t,e){return t.substring(e)},t.prototype.updateLastIndex=function(t,e){t.lastIndex=e},t.prototype.updateTokenEndLineColumnLocation=function(t,e,n,r,i,o,a){var s,c;void 0!==e&&(s=n===a-1,c=s?-1:0,1===r&&!0===s||(t.endLine=i+c,t.endColumn=o-1-c))},t.prototype.computeNewColumn=function(t,e){return t+e},t.prototype.createTokenInstance=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return null},t.prototype.createOffsetOnlyToken=function(t,e,n,r){return{image:t,startOffset:e,tokenTypeIdx:n,tokenType:r}},t.prototype.createStartOnlyToken=function(t,e,n,r,i,o){return{image:t,startOffset:e,startLine:i,startColumn:o,tokenTypeIdx:n,tokenType:r}},t.prototype.createFullToken=function(t,e,n,r,i,o,a){return{image:t,startOffset:e,endOffset:e+a-1,startLine:i,endLine:i,startColumn:o,endColumn:o+a-1,tokenTypeIdx:n,tokenType:r}},t.prototype.addToken=function(t,e,n){return 666},t.prototype.addTokenUsingPush=function(t,e,n){return t.push(n),e},t.prototype.addTokenUsingMemberAccess=function(t,e,n){return t[e]=n,++e},t.prototype.match=function(t,e,n){return null},t.prototype.matchWithTest=function(t,e,n){return!0===t.test(e)?e.substring(n,t.lastIndex):null},t.prototype.matchWithExec=function(t,e){var n=t.exec(e);return null!==n?n[0]:n},t.SKIPPED="This marks a skipped Token pattern, this means each token identified by it willbe consumed and then thrown into oblivion, this can be used to for example to completely ignore whitespace.",t.NA=/NOT_APPLICABLE/,t}();e.Lexer=s},function(t,e,n){"use strict";function r(t){return t instanceof u.gast.Flat||t instanceof u.gast.Option||t instanceof u.gast.Repetition||t instanceof u.gast.RepetitionMandatory||t instanceof u.gast.RepetitionMandatoryWithSeparator||t instanceof u.gast.RepetitionWithSeparator||t instanceof u.gast.Terminal||t instanceof u.gast.Rule}function i(t,e){return void 0===e&&(e=[]),!!(t instanceof u.gast.Option||t instanceof u.gast.Repetition||t instanceof u.gast.RepetitionWithSeparator)||(t instanceof u.gast.Alternation?l.some(t.definition,function(t){return i(t,e)}):!(t instanceof u.gast.NonTerminal&&l.contains(e,t))&&t instanceof u.gast.AbstractProduction&&(t instanceof u.gast.NonTerminal&&e.push(t),l.every(t.definition,function(t){return i(t,e)})))}function o(t){return t instanceof u.gast.Alternation}function a(t){if(t instanceof u.gast.NonTerminal)return"SUBRULE";if(t instanceof u.gast.Option)return"OPTION";if(t instanceof u.gast.Alternation)return"OR";if(t instanceof u.gast.RepetitionMandatory)return"AT_LEAST_ONE";if(t instanceof u.gast.RepetitionMandatoryWithSeparator)return"AT_LEAST_ONE_SEP";if(t instanceof u.gast.RepetitionWithSeparator)return"MANY_SEP";if(t instanceof u.gast.Repetition)return"MANY";if(t instanceof u.gast.Terminal)return"CONSUME";throw Error("non exhaustive match")}function s(t){return(new p).visit(t)}var c=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var u=n(1),l=n(0);e.isSequenceProd=r,e.isOptionalProd=i,e.isBranchingProd=o,e.getProductionDslName=a;var p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),e.prototype.visitNonTerminal=function(t){return new u.gast.NonTerminal(t.nonTerminalName,void 0,t.occurrenceInParent,t.implicitOccurrenceIndex)},e.prototype.visitFlat=function(t){var e=this,n=l.map(t.definition,function(t){return e.visit(t)});return new u.gast.Flat(n,t.name)},e.prototype.visitOption=function(t){var e=this,n=l.map(t.definition,function(t){return e.visit(t)});return new u.gast.Option(n,t.occurrenceInParent,t.name,t.implicitOccurrenceIndex)},e.prototype.visitRepetition=function(t){var e=this,n=l.map(t.definition,function(t){return e.visit(t)});return new u.gast.Repetition(n,t.occurrenceInParent,t.name,t.implicitOccurrenceIndex)},e.prototype.visitRepetitionMandatory=function(t){var e=this,n=l.map(t.definition,function(t){return e.visit(t)});return new u.gast.RepetitionMandatory(n,t.occurrenceInParent,t.name,t.implicitOccurrenceIndex)},e.prototype.visitRepetitionMandatoryWithSeparator=function(t){var e=this,n=l.map(t.definition,function(t){return e.visit(t)});return new u.gast.RepetitionMandatoryWithSeparator(n,t.separator,t.occurrenceInParent,t.name,t.implicitOccurrenceIndex)},e.prototype.visitRepetitionWithSeparator=function(t){var e=this,n=l.map(t.definition,function(t){return e.visit(t)});return new u.gast.RepetitionWithSeparator(n,t.separator,t.occurrenceInParent,t.name,t.implicitOccurrenceIndex)},e.prototype.visitAlternation=function(t){var e=this,n=l.map(t.definition,function(t){return e.visit(t)});return new u.gast.Alternation(n,t.occurrenceInParent,t.name,t.implicitOccurrenceIndex)},e.prototype.visitTerminal=function(t){return new u.gast.Terminal(t.terminalType,t.occurrenceInParent,t.implicitOccurrenceIndex)},e.prototype.visitRule=function(t){var e=this,n=l.map(t.definition,function(t){return e.visit(t)});return new u.gast.Rule(t.name,n,t.orgText)},e}(u.gast.GAstVisitor);e.cloneProduction=s},function(t,e,n){"use strict";function r(t,e,n){return[new i.gast.Option([new i.gast.Terminal(t.separator)].concat(t.definition))].concat(e,n)}Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),o=n(0),a=function(){function t(){}return t.prototype.walk=function(t,e){var n=this;void 0===e&&(e=[]),o.forEach(t.definition,function(r,a){var s=o.drop(t.definition,a+1);if(r instanceof i.gast.NonTerminal)n.walkProdRef(r,s,e);else if(r instanceof i.gast.Terminal)n.walkTerminal(r,s,e);else if(r instanceof i.gast.Flat)n.walkFlat(r,s,e);else if(r instanceof i.gast.Option)n.walkOption(r,s,e);else if(r instanceof i.gast.RepetitionMandatory)n.walkAtLeastOne(r,s,e);else if(r instanceof i.gast.RepetitionMandatoryWithSeparator)n.walkAtLeastOneSep(r,s,e);else if(r instanceof i.gast.RepetitionWithSeparator)n.walkManySep(r,s,e);else if(r instanceof i.gast.Repetition)n.walkMany(r,s,e);else{if(!(r instanceof i.gast.Alternation))throw Error("non exhaustive match");n.walkOr(r,s,e)}})},t.prototype.walkTerminal=function(t,e,n){},t.prototype.walkProdRef=function(t,e,n){},t.prototype.walkFlat=function(t,e,n){var r=e.concat(n);this.walk(t,r)},t.prototype.walkOption=function(t,e,n){var r=e.concat(n);this.walk(t,r)},t.prototype.walkAtLeastOne=function(t,e,n){var r=[new i.gast.Option(t.definition)].concat(e,n);this.walk(t,r)},t.prototype.walkAtLeastOneSep=function(t,e,n){var i=r(t,e,n);this.walk(t,i)},t.prototype.walkMany=function(t,e,n){var r=[new i.gast.Option(t.definition)].concat(e,n);this.walk(t,r)},t.prototype.walkManySep=function(t,e,n){var i=r(t,e,n);this.walk(t,i)},t.prototype.walkOr=function(t,e,n){var r=this,a=e.concat(n);o.forEach(t.definition,function(t){var e=new i.gast.Flat([t]);r.walk(e,a)})},t}();e.RestWalker=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VERSION="1.0.1"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0);!function(t){function e(t){return r.contains(p,t.name)}function n(t,e){this.name=s,this.message=t,this.token=e,this.resyncedTokens=[]}function i(t,e){this.name=c,this.message=t,this.token=e,this.resyncedTokens=[]}function o(t,e){this.name=l,this.message=t,this.token=e,this.resyncedTokens=[]}function a(t,e,n){this.name=u,this.message=t,this.token=e,this.previousToken=n,this.resyncedTokens=[]}var s="MismatchedTokenException",c="NoViableAltException",u="EarlyExitException",l="NotAllInputParsedException",p=[s,c,u,l];Object.freeze(p),t.isRecognitionException=e,t.MismatchedTokenException=n,n.prototype=Error.prototype,t.NoViableAltException=i,i.prototype=Error.prototype,t.NotAllInputParsedException=o,o.prototype=Error.prototype,t.EarlyExitException=a,a.prototype=Error.prototype}(e.exceptions||(e.exceptions={}))},function(t,e,n){"use strict";function r(t,e,n,r){var a=S.map(t,o),s=S.map(t,function(t){return d(t,t)}),c=[],u=[];O.every(s,O.isEmpty)&&(c=O.map(t,E),u=O.map(t,function(t){return m(t,e,r)}));var l=O.map(t,function(t){return t.name}),f=O.map(n,function(t){return k.tokenName(t)}),h=R(l,f),T=S.map(f,p),_=i(t),g=A(t),N=y(t,e),I=S.map(t,v);return S.flatten(a.concat(T,_,g,N,s,c,u,h,I))}function i(t){var e=[];return O.forEach(t,function(t){var n=new M.NamedDSLMethodsCollectorVisitor("");t.accept(n);var r=O.map(n.result,function(t){return t.name}),i=t.name;e.push(O.map(r,function(t){return l(t,i)}))}),O.flatten(e)}function o(t){var e=new F;t.accept(e);var n=e.allProductions,r=S.groupBy(n,s),i=S.pick(r,function(t){return t.length>1});return S.map(S.values(i),function(e){var n=S.first(e),r=a(e,t.name),i=P.getProductionDslName(n),o={message:r,type:I.ParserDefinitionErrorType.DUPLICATE_PRODUCTIONS,ruleName:t.name,dslName:i,occurrence:n.occurrenceInParent},s=c(n);return s&&(o.parameter=s),o})}function a(t,e){var n=S.first(t),r=n.occurrenceInParent,i=P.getProductionDslName(n),o=c(n),a="->"+i+"<- with occurrence index: ->"+r+"<-\n                  "+(o?"and argument: "+o:"")+"\n                  appears more than once ("+t.length+" times) in the top level rule: "+e+".\n                  "+(1===r?"note that "+i+" and "+i+"1 both have the same occurrence index 1}":"")+"}\n                  to fix this make sure each usage of "+i+" "+(o?"with the argument: "+o:"")+"\n                  in the rule "+e+" has a different occurrence index (1-5), as that combination acts as a unique\n                  position key in the grammar, which is needed by the parsing engine.";return a=a.replace(/[ \t]+/g," "),a=a.replace(/\s\s+/g,"\n")}function s(t){return P.getProductionDslName(t)+"_#_"+t.occurrenceInParent+"_#_"+c(t)}function c(t){return t instanceof L.gast.Terminal?k.tokenName(t.terminalType):t instanceof L.gast.NonTerminal?t.nonTerminalName:""}function u(t){var n,r=[];return t.match(e.validTermsPattern)||(n="Invalid Grammar rule name: ->"+t+"<- it must match the pattern: ->"+e.validTermsPattern.toString()+"<-",r.push({message:n,type:I.ParserDefinitionErrorType.INVALID_RULE_NAME,ruleName:t})),r}function l(t,n){var r,i=[];return t.match(e.validNestedRuleName)||(r="Invalid nested rule name: ->"+t+"<- inside rule: ->"+n+"<-\nit must match the pattern: ->"+e.validNestedRuleName.toString()+"<-.\nNote that this means a nested rule name must start with the '$'(dollar) sign.",i.push({message:r,type:I.ParserDefinitionErrorType.INVALID_NESTED_RULE_NAME,ruleName:t})),i}function p(t){var n,r=[];return t.match(e.validTermsPattern)||(n="Invalid Grammar Token name: ->"+t+"<- it must match the pattern: ->"+e.validTermsPattern.toString()+"<-",r.push({message:n,type:I.ParserDefinitionErrorType.INVALID_TOKEN_NAME})),r}function f(t,e,n){var r,i=[];return S.contains(e,t)&&(r="Duplicate definition, rule: ->"+t+"<- is already defined in the grammar: ->"+n+"<-",i.push({message:r,type:I.ParserDefinitionErrorType.DUPLICATE_RULE_NAME,ruleName:t})),i}function h(t,e,n){var r,i=[];return S.contains(e,t)||(r="Invalid rule override, rule: ->"+t+"<- cannot be overridden in the grammar: ->"+n+"<-as it is not defined in any of the super grammars ",i.push({message:r,type:I.ParserDefinitionErrorType.INVALID_RULE_OVERRIDE,ruleName:t})),i}function d(t,e,n){void 0===n&&(n=[]);var r=[],i=T(e.definition);if(S.isEmpty(i))return[];var o=t.name,a=S.contains(i,t),s=S.map(n,function(t){return t.name}),c=o+" --\x3e "+s.concat([o]).join(" --\x3e ");if(a){var u="Left Recursion found in grammar.\nrule: <"+o+"> can be invoked from itself (directly or indirectly)\nwithout consuming any Tokens. The grammar path that causes this is: \n "+c+"\n To fix this refactor your grammar to remove the left recursion.\nsee: https://en.wikipedia.org/wiki/LL_parser#Left_Factoring.";r.push({message:u,type:I.ParserDefinitionErrorType.LEFT_RECURSION,ruleName:o})}var l=S.difference(i,n.concat([t])),p=S.map(l,function(e){var r=S.cloneArr(n);return r.push(e),d(t,e,r)});return r.concat(S.flatten(p))}function T(t){var e=[];if(S.isEmpty(t))return e;var n=S.first(t);if(n instanceof L.gast.NonTerminal)e.push(n.referencedRule);else if(n instanceof L.gast.Flat||n instanceof L.gast.Option||n instanceof L.gast.RepetitionMandatory||n instanceof L.gast.RepetitionMandatoryWithSeparator||n instanceof L.gast.RepetitionWithSeparator||n instanceof L.gast.Repetition)e=e.concat(T(n.definition));else if(n instanceof L.gast.Alternation)e=S.flatten(S.map(n.definition,function(t){return T(t.definition)}));else if(!(n instanceof L.gast.Terminal))throw Error("non exhaustive match");var r=P.isOptionalProd(n),i=t.length>1;if(r&&i){var o=S.drop(t);return e.concat(T(o))}return e}function E(t){var e=new w;t.accept(e);var n=e.alternations;return S.reduce(n,function(e,n){var r=S.dropRight(n.definition),i=S.map(r,function(e,r){var i=D.nextPossibleTokensAfter([e],[],null,1);return S.isEmpty(i)?{message:"Ambiguous empty alternative: <"+(r+1)+"> in <OR"+n.occurrenceInParent+"> inside <"+t.name+"> Rule.\nOnly the last alternative may be an empty alternative.",type:I.ParserDefinitionErrorType.NONE_LAST_EMPTY_ALT,ruleName:t.name,occurrence:n.occurrenceInParent,alternative:r+1}:null});return e.concat(S.compact(i))},[])}function m(t,e,n){var r=new w;t.accept(r);var i=r.alternations,o=n[t.name];return o&&(i=O.reject(i,function(t){return o[P.getProductionDslName(t)+t.occurrenceInParent]})),S.reduce(i,function(n,r){var i=r.occurrenceInParent,o=x.getLookaheadPathsForOr(i,t,e),a=_(o,r,t.name),s=g(o,r,t.name);return n.concat(a,s)},[])}function v(t){var e=new w;t.accept(e);var n=e.alternations;return S.reduce(n,function(e,n){return n.definition.length>255&&e.push({message:"An Alternation cannot have more than 256 alternatives:\n<OR"+n.occurrenceInParent+"> inside <"+t.name+"> Rule.\n has "+(n.definition.length+1)+" alternatives.",type:I.ParserDefinitionErrorType.TOO_MANY_ALTS,ruleName:t.name,occurrence:n.occurrenceInParent}),e},[])}function y(t,e){var n=[];return O.forEach(t,function(t){var r=new U;t.accept(r);var i=r.allProductions;O.forEach(i,function(r){var i=x.getProdType(r),o=r.occurrenceInParent,a=x.getLookaheadPathsForOptionalProd(o,t,i,e),s=a[0];if(O.isEmpty(O.flatten(s))){var c=r.implicitOccurrenceIndex,u=P.getProductionDslName(r);c||(u+=o);var l="The repetition <"+u+"> within Rule <"+t.name+"> can never consume any tokens.\nThis could lead to an infinite loop.";n.push({message:l,type:I.ParserDefinitionErrorType.NO_NON_EMPTY_LOOKAHEAD,ruleName:t.name})}})}),n}function _(t,e,n){var r=[],i=O.reduce(t,function(e,n,i){return O.forEach(n,function(n){var o=[i];O.forEach(t,function(t,e){i!==e&&x.containsPath(t,n)&&o.push(e)}),o.length>1&&!x.containsPath(r,n)&&(r.push(n),e.push({alts:o,path:n}))}),e},[]);return S.map(i,function(t){var r=O.map(t.alts,function(t){return t+1}),i=O.map(t.path,function(t){return k.tokenLabel(t)}).join(", "),o=e.implicitOccurrenceIndex?"":e.occurrenceInParent,a="Ambiguous alternatives: <"+r.join(" ,")+"> in <OR"+o+"> inside <"+n+"> Rule,\n<"+i+"> may appears as a prefix path in all these alternatives.\n";return a=a+"To Resolve this, try one of of the following: \n1. Refactor your grammar to be LL(K) for the current value of k (by default k=5)\n2. Increase the value of K for your grammar by providing a larger 'maxLookahead' value in the parser's config\n3. This issue can be ignored (if you know what you are doing...), see http://sap.github.io/chevrotain/documentation/"+C.VERSION.replace(/\./g,"_")+"/interfaces/_chevrotain_d_.iparserconfig.html#ignoredissues for more details\n",{message:a,type:I.ParserDefinitionErrorType.AMBIGUOUS_ALTS,ruleName:n,occurrence:e.occurrenceInParent,alternatives:[t.alts]}})}function g(t,e,n){var r=[],i=O.reduce(t,function(t,e,n){var r=O.map(e,function(t){return{idx:n,path:t}});return t.concat(r)},[]);return O.forEach(i,function(t){var o=t.idx,a=t.path,s=O.findAll(i,function(t){return t.idx<o&&x.isStrictPrefixOfPath(t.path,a)}),c=O.map(s,function(t){var r=[t.idx+1,o+1],i=O.map(t.path,function(t){return k.tokenLabel(t)}).join(", "),a=e.implicitOccurrenceIndex?"":e.occurrenceInParent;return{message:"Ambiguous alternatives: <"+r.join(" ,")+"> due to common lookahead prefix\nin <OR"+a+"> inside <"+n+"> Rule,\n<"+i+"> may appears as a prefix path in all these alternatives.\nhttp://sap.github.io/chevrotain/website/Building_Grammars/resolving_grammar_errors.html#COMMON_PREFIX For farther details.",type:I.ParserDefinitionErrorType.AMBIGUOUS_PREFIX_ALTS,ruleName:n,occurrence:a,alternatives:r}});r=r.concat(c)}),r}function R(t,e){var n=[];return O.forEach(t,function(t){if(O.contains(e,t)){var r="Namespace conflict found in grammar.\nThe grammar has both a Terminal(Token) and a Non-Terminal(Rule) named: <"+t+">.\nTo resolve this make sure each Terminal and Non-Terminal names are unique\nThis is easy to accomplish by using the convention that Terminal names start with an uppercase letter\nand Non-Terminal names start with a lower case letter.";n.push({message:r,type:I.ParserDefinitionErrorType.CONFLICT_TOKENS_RULES_NAMESPACE,ruleName:t})}}),n}function A(t){var e=[];return O.forEach(t,function(t){var n=new M.NamedDSLMethodsCollectorVisitor("");t.accept(n);var r=O.map(n.result,function(t){return t.name}),i=O.groupBy(r,function(t){return t}),o=O.pick(i,function(t){return t.length>1});O.forEach(O.values(o),function(n){var r=S.first(n),i="Duplicate nested rule name: ->"+r+"<- inside rule: ->"+t.name+"<-\nA nested name must be unique in the scope of a top level grammar rule.";e.push({message:i,type:I.ParserDefinitionErrorType.DUPLICATE_NESTED_NAME,ruleName:t.name})})}),e}var N=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var S=n(0),O=n(0),I=n(6),L=n(1),P=n(9),k=n(2),x=n(14),C=n(11),M=n(16),D=n(5);e.validateGrammar=r,e.identifyProductionForDuplicates=s;var F=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.allProductions=[],e}return N(e,t),e.prototype.visitNonTerminal=function(t){this.allProductions.push(t)},e.prototype.visitOption=function(t){this.allProductions.push(t)},e.prototype.visitRepetitionWithSeparator=function(t){this.allProductions.push(t)},e.prototype.visitRepetitionMandatory=function(t){this.allProductions.push(t)},e.prototype.visitRepetitionMandatoryWithSeparator=function(t){this.allProductions.push(t)},e.prototype.visitRepetition=function(t){this.allProductions.push(t)},e.prototype.visitAlternation=function(t){this.allProductions.push(t)},e.prototype.visitTerminal=function(t){this.allProductions.push(t)},e}(L.gast.GAstVisitor);e.OccurrenceValidationCollector=F,e.validTermsPattern=/^[a-zA-Z_]\w*$/,e.validNestedRuleName=new RegExp(e.validTermsPattern.source.replace("^","^\\$")),e.validateRuleName=u,e.validateNestedRuleName=l,e.validateTokenName=p,e.validateRuleDoesNotAlreadyExist=f,e.validateRuleIsOverridden=h,e.validateNoLeftRecursion=d,e.getFirstNoneTerminal=T;var w=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.alternations=[],e}return N(e,t),e.prototype.visitAlternation=function(t){this.alternations.push(t)},e}(L.gast.GAstVisitor);e.validateEmptyOrAlternative=E,e.validateAmbiguousAlternationAlternatives=m;var U=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.allProductions=[],e}return N(e,t),e.prototype.visitRepetitionWithSeparator=function(t){this.allProductions.push(t)},e.prototype.visitRepetitionMandatory=function(t){this.allProductions.push(t)},e.prototype.visitRepetitionMandatoryWithSeparator=function(t){this.allProductions.push(t)},e.prototype.visitRepetition=function(t){this.allProductions.push(t)},e}(L.gast.GAstVisitor);e.RepetionCollector=U,e.validateTooManyAlts=v,e.validateSomeNonEmptyLookaheadPath=y},function(t,e,n){"use strict";function r(t){if(t instanceof m.gast.Option)return T.OPTION;if(t instanceof m.gast.Repetition)return T.REPETITION;if(t instanceof m.gast.RepetitionMandatory)return T.REPETITION_MANDATORY;if(t instanceof m.gast.RepetitionMandatoryWithSeparator)return T.REPETITION_MANDATORY_WITH_SEPARATOR;if(t instanceof m.gast.RepetitionWithSeparator)return T.REPETITION_WITH_SEPARATOR;if(t instanceof m.gast.Alternation)return T.ALTERNATION;throw Error("non exhaustive match")}function i(t,e,n,r,i,o){var a=u(t,e,n);return o(a,r,h(a)?_.tokenStructuredMatcherNoCategories:_.tokenStructuredMatcher,i)}function o(t,e,n,r,i,o){var a=l(t,e,i,n),s=h(a)?_.tokenStructuredMatcherNoCategories:_.tokenStructuredMatcher;return o(a[0],s,r)}function a(t,e,n,r){var i=t.length,o=E.every(t,function(t){return E.every(t,function(t){return 1===t.length})});if(e)return function(e){for(var r=E.map(e,function(t){return t.GATE}),o=0;o<i;o++){var a=t[o],s=a.length,c=r[o];if(!c||c.call(this))t:for(var u=0;u<s;u++){for(var l=a[u],p=l.length,f=0;f<p;f++){var h=this.LA(f+1);if(!1===n(h,l[f]))continue t}return o}}};if(o&&!r){var a=E.map(t,function(t){return E.flatten(t)}),s=E.reduce(a,function(t,e,n){return E.forEach(e,function(e){E.has(t,e.tokenTypeIdx)||(t[e.tokenTypeIdx]=n),E.forEach(e.categoryMatches,function(e){E.has(t,e)||(t[e]=n)})}),t},{});return function(){var t=this.LA(1);return s[t.tokenTypeIdx]}}return function(){for(var e=0;e<i;e++){var r=t[e],o=r.length;t:for(var a=0;a<o;a++){for(var s=r[a],c=s.length,u=0;u<c;u++){var l=this.LA(u+1);if(!1===n(l,s[u]))continue t}return e}}}}function s(t,e,n){var r=E.every(t,function(t){return 1===t.length}),i=t.length;if(r&&!n){var o=E.flatten(t);if(1===o.length&&E.isEmpty(o[0].categoryMatches)){var a=o[0],s=a.tokenTypeIdx;return function(){return this.LA(1).tokenTypeIdx===s}}var c=E.reduce(o,function(t,e,n){return t[e.tokenTypeIdx]=!0,E.forEach(e.categoryMatches,function(e){t[e]=!0}),t},{});return function(){var t=this.LA(1);return!0===c[t.tokenTypeIdx]}}return function(){t:for(var n=0;n<i;n++){for(var r=t[n],o=r.length,a=0;a<o;a++){var s=this.LA(a+1);if(!1===e(s,r[a]))continue t}return!0}return!1}}function c(t,e){function n(t){for(var e=[],n=0;n<t;n++)e.push([]);return e}for(var r=E.map(t,function(t){return v.possiblePathsFrom([t],1)}),i=n(r.length),o=r,a=1;a<=e;a++){var s=o;o=n(s.length);for(var c=0;c<s.length;c++)for(var u=s[c],l=function(t,e){return E.reduce(t,function(t,n,r){if(r!==e){var i=E.map(n,function(t){return t.partialPath});return t.concat(i)}return t},[])}(s,c),f=0;f<u.length;f++){var h=u[f].partialPath,d=u[f].suffixDef,T=function(t,e){return void 0===E.find(t,function(t){return E.every(e,function(e,n){return e===t[n]})})}(l,h);if(T||E.isEmpty(d)||h.length===e){var m=i[c];p(m,h)||m.push(h)}else{var y=v.possiblePathsFrom(d,a+1,h);o[c]=o[c].concat(y)}}}return i}function u(t,e,n){var r=new R(t,T.ALTERNATION);return e.accept(r),c(r.result,n)}function l(t,e,n,r){var i=new R(t,n);e.accept(i);var o=i.result,a=new g(e,t,n),s=a.startWalking();return c([new m.gast.Flat(o),new m.gast.Flat(s)],r)}function p(t,e){return void 0!==E.find(t,function(t){return e.length===t.length&&E.every(e,function(e,n){return e===t[n]})})}function f(t,e){return t.length<e.length&&E.every(t,function(t,n){return t===e[n]})}function h(t){return E.every(t,function(t){return E.every(t,function(t){return E.every(t,function(t){return E.isEmpty(t.categoryMatches)})})})}var d=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var T,E=n(0),m=n(1),v=n(5),y=n(10),_=n(4);!function(t){t[t.OPTION=0]="OPTION",t[t.REPETITION=1]="REPETITION",t[t.REPETITION_MANDATORY=2]="REPETITION_MANDATORY",t[t.REPETITION_MANDATORY_WITH_SEPARATOR=3]="REPETITION_MANDATORY_WITH_SEPARATOR",t[t.REPETITION_WITH_SEPARATOR=4]="REPETITION_WITH_SEPARATOR",t[t.ALTERNATION=5]="ALTERNATION"}(T=e.PROD_TYPE||(e.PROD_TYPE={})),e.getProdType=r,e.buildLookaheadFuncForOr=i,e.buildLookaheadFuncForOptionalProd=o,e.buildAlternativesLookAheadFunc=a,e.buildSingleAlternativeLookaheadFunction=s;var g=function(t){function e(e,n,r){var i=t.call(this)||this;return i.topProd=e,i.targetOccurrence=n,i.targetProdType=r,i}return d(e,t),e.prototype.startWalking=function(){return this.walk(this.topProd),this.restDef},e.prototype.checkIsTarget=function(t,e,n,r){return t.occurrenceInParent===this.targetOccurrence&&this.targetProdType===e&&(this.restDef=n.concat(r),!0)},e.prototype.walkOption=function(e,n,r){this.checkIsTarget(e,T.OPTION,n,r)||t.prototype.walkOption.call(this,e,n,r)},e.prototype.walkAtLeastOne=function(e,n,r){this.checkIsTarget(e,T.REPETITION_MANDATORY,n,r)||t.prototype.walkOption.call(this,e,n,r)},e.prototype.walkAtLeastOneSep=function(e,n,r){this.checkIsTarget(e,T.REPETITION_MANDATORY_WITH_SEPARATOR,n,r)||t.prototype.walkOption.call(this,e,n,r)},e.prototype.walkMany=function(e,n,r){this.checkIsTarget(e,T.REPETITION,n,r)||t.prototype.walkOption.call(this,e,n,r)},e.prototype.walkManySep=function(e,n,r){this.checkIsTarget(e,T.REPETITION_WITH_SEPARATOR,n,r)||t.prototype.walkOption.call(this,e,n,r)},e}(y.RestWalker),R=function(t){function e(e,n){var r=t.call(this)||this;return r.targetOccurrence=e,r.targetProdType=n,r.result=[],r}return d(e,t),e.prototype.checkIsTarget=function(t,e){t.occurrenceInParent===this.targetOccurrence&&this.targetProdType===e&&(this.result=t.definition)},e.prototype.visitOption=function(t){this.checkIsTarget(t,T.OPTION)},e.prototype.visitRepetition=function(t){this.checkIsTarget(t,T.REPETITION)},e.prototype.visitRepetitionMandatory=function(t){this.checkIsTarget(t,T.REPETITION_MANDATORY)},e.prototype.visitRepetitionMandatoryWithSeparator=function(t){this.checkIsTarget(t,T.REPETITION_MANDATORY_WITH_SEPARATOR)},e.prototype.visitRepetitionWithSeparator=function(t){this.checkIsTarget(t,T.REPETITION_WITH_SEPARATOR)},e.prototype.visitAlternation=function(t){this.checkIsTarget(t,T.ALTERNATION)},e}(m.gast.GAstVisitor);e.lookAheadSequenceFromAlternatives=c,e.getLookaheadPathsForOr=u,e.getLookaheadPathsForOptionalProd=l,e.containsPath=p,e.isStrictPrefixOfPath=f,e.areTokenCategoriesNotUsed=h},function(t,e,n){"use strict";function r(t){if(t instanceof s.gast.NonTerminal)return r(t.referencedRule);if(t instanceof s.gast.Terminal)return a(t);if(c.isSequenceProd(t))return i(t);if(c.isBranchingProd(t))return o(t);throw Error("non exhaustive match")}function i(t){for(var e,n=[],i=t.definition,o=0,a=i.length>o,s=!0;a&&s;)e=i[o],s=c.isOptionalProd(e),n=n.concat(r(e)),o+=1,a=i.length>o;return u.uniq(n)}function o(t){var e=u.map(t.definition,function(t){return r(t)});return u.uniq(u.flatten(e))}function a(t){return[t.terminalType]}Object.defineProperty(e,"__esModule",{value:!0});var s=n(1),c=n(9),u=n(0);e.first=r,e.firstForSequence=i,e.firstForBranching=o,e.firstForTerminal=a},function(t,e,n){"use strict";function r(t,e,n){t.children[n].push(e)}function i(t,e,n){t.children[e].push(n)}function o(t,e){var n={dictDef:new f.HashTable,allRuleNames:[]};return p.forEach(t,function(t){var r=s(t.definition),i=e.get(t.name);n.dictDef.put(i,a(r)),n.allRuleNames.push(t.name);var o=new T(i);t.accept(o),p.forEach(o.result,function(e){var r=e.def,i=e.key,o=e.name,c=s(r);n.dictDef.put(i,a(c)),n.allRuleNames.push(t.name+o)})}),n}function a(t){var e="return {\n";return e+=p.map(t,function(t){return'"'+t+'" : []'}).join(",\n"),e+="}",Function(e)}function s(t){function e(t){n.push(t);var e={def:p.drop(i),inIteration:o,inOption:a,currResult:p.cloneObj(s)};r.push(e)}var n=[],r=[];r.push({def:t});for(var i,o,a,s;!p.isEmpty(r);){var c=r.pop();if(i=c.def,o=c.inIteration,a=c.inOption,s=c.currResult,!p.isEmpty(i)){var f=i[0];if(f instanceof l.gast.Terminal){e(u.tokenName(f.terminalType))}else if(f instanceof l.gast.NonTerminal){var h=f.nonTerminalName;e(h)}else if(f instanceof l.gast.Option)if(p.isUndefined(f.name)){var d={def:f.definition.concat(p.drop(i))};r.push(d)}else e(f.name);else if(f instanceof l.gast.RepetitionMandatory||f instanceof l.gast.Repetition)if(p.isUndefined(f.name)){var T=f.definition.concat(p.drop(i)),E={def:T};r.push(E)}else e(f.name);else if(f instanceof l.gast.RepetitionMandatoryWithSeparator||f instanceof l.gast.RepetitionWithSeparator)if(p.isUndefined(f.name)){var m=new l.gast.Terminal(f.separator),v=new l.gast.Repetition([m].concat(f.definition),f.occurrenceInParent),T=[v].concat(p.drop(i)),E={def:T};r.push(E)}else e(f.name);else{if(!(f instanceof l.gast.Alternation))throw Error("non exhaustive match");if(p.isUndefined(f.name))for(var y=f.definition.length-1;y>=0;y--){var _=f.definition[y];if(p.isUndefined(_.name)){var g=_.definition.concat(p.drop(i)),R={def:g};r.push(R)}else e(_.name)}else e(f.name)}}}return n}var c=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var u=n(2),l=n(1),p=n(0),f=n(3),h=n(17),d=l.gast.GAstVisitor;e.addTerminalToCst=r,e.addNoneTerminalToCst=i;var T=function(t){function e(e){var n=t.call(this)||this;return n.result=[],n.ruleIdx=e,n}return c(e,t),e.prototype.collectNamedDSLMethod=function(t,e,n){if(!p.isUndefined(t.name)){var r=void 0;r=p.has(t,"separator")?new e(t.definition,t.separator,t.occurrenceInParent):new e(t.definition,t.occurrenceInParent);var i=[r],o=h.getKeyForAutomaticLookahead(this.ruleIdx,n,t.occurrenceInParent);this.result.push({def:i,key:o,name:t.name})}},e.prototype.visitOption=function(t){this.collectNamedDSLMethod(t,l.gast.Option,h.OPTION_IDX)},e.prototype.visitRepetition=function(t){this.collectNamedDSLMethod(t,l.gast.Repetition,h.MANY_IDX)},e.prototype.visitRepetitionMandatory=function(t){this.collectNamedDSLMethod(t,l.gast.RepetitionMandatory,h.AT_LEAST_ONE_IDX)},e.prototype.visitRepetitionMandatoryWithSeparator=function(t){this.collectNamedDSLMethod(t,l.gast.RepetitionMandatoryWithSeparator,h.AT_LEAST_ONE_SEP_IDX)},e.prototype.visitRepetitionWithSeparator=function(t){this.collectNamedDSLMethod(t,l.gast.RepetitionWithSeparator,h.MANY_SEP_IDX)},e.prototype.visitAlternation=function(t){var e=this;this.collectNamedDSLMethod(t,l.gast.Alternation,h.OR_IDX);var n=t.definition.length>1;p.forEach(t.definition,function(r,i){if(!p.isUndefined(r.name)){var o=r.definition;o=n?[new l.gast.Option(r.definition)]:r.definition;var a=h.getKeyForAltIndex(e.ruleIdx,h.OR_IDX,t.occurrenceInParent,i);e.result.push({def:o,key:a,name:r.name})}})},e}(d);e.NamedDSLMethodsCollectorVisitor=T,e.analyzeCst=o,e.buildChildDictionaryDef=s},function(t,e,n){"use strict";function r(t,e,n){return n|e|t}function i(t,e,n,i){var a=i+1<<o;return r(t,e,n)|a}Object.defineProperty(e,"__esModule",{value:!0}),e.BITS_FOR_METHOD_IDX=4,e.BITS_FOR_OCCURRENCE_IDX=4,e.BITS_FOR_RULE_IDX=24,e.BITS_FOR_ALT_IDX=8,e.OR_IDX=1<<e.BITS_FOR_METHOD_IDX,e.OPTION_IDX=2<<e.BITS_FOR_METHOD_IDX,e.MANY_IDX=3<<e.BITS_FOR_METHOD_IDX,e.AT_LEAST_ONE_IDX=4<<e.BITS_FOR_METHOD_IDX,e.MANY_SEP_IDX=5<<e.BITS_FOR_METHOD_IDX,e.AT_LEAST_ONE_SEP_IDX=6<<e.BITS_FOR_METHOD_IDX,e.getKeyForAutomaticLookahead=r;var o=32-e.BITS_FOR_ALT_IDX;e.getKeyForAltIndex=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IN="_~IN~_"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(2),i=n(0);e.defaultErrorProvider={buildMismatchTokenMessage:function(t){var e=t.expected,n=t.actual;t.ruleName;return"Expecting "+(r.hasTokenLabel(e)?"--\x3e "+r.tokenLabel(e)+" <--":"token of type --\x3e "+r.tokenName(e)+" <--")+" but found --\x3e '"+n.image+"' <--"},buildNotAllInputParsedMessage:function(t){var e=t.firstRedundant;t.ruleName;return"Redundant input, expecting EOF but found: "+e.image},buildNoViableAltMessage:function(t){var e=t.expectedPathsPerAlt,n=t.actual,o=t.customUserDescription,a=(t.ruleName,i.first(n).image),s="\nbut found: '"+a+"'";if(o)return"Expecting: "+o+s;var c=i.reduce(e,function(t,e){return t.concat(e)},[]),u=i.map(c,function(t){return"["+i.map(t,function(t){return r.tokenLabel(t)}).join(", ")+"]"});return"Expecting: one of these possible Token sequences:\n"+i.map(u,function(t,e){return"  "+(e+1)+". "+t}).join("\n")+s},buildEarlyExitMessage:function(t){var e=t.expectedIterationPaths,n=t.actual,o=t.customUserDescription,a=(t.ruleName,i.first(n).image),s="\nbut found: '"+a+"'";return o?"Expecting: "+o+s:"Expecting: expecting at least one iteration which starts with one of these possible Token sequences::\n  <"+i.map(e,function(t){return"["+i.map(t,function(t){return r.tokenLabel(t)}).join(",")+"]"}).join(" ,")+">"+s}},Object.freeze(e.defaultErrorProvider)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(6),i=n(8),o=n(2),a=n(12),s=n(1),c=n(27),u=n(5),l=n(11),p=n(19),f=n(28),h={};h.VERSION=l.VERSION,h.Parser=r.Parser,h.ParserDefinitionErrorType=r.ParserDefinitionErrorType,h.Lexer=i.Lexer,h.LexerDefinitionErrorType=i.LexerDefinitionErrorType,h.EOF=o.EOF,h.tokenName=o.tokenName,h.tokenLabel=o.tokenLabel,h.tokenMatcher=o.tokenMatcher,h.createToken=o.createToken,h.createTokenInstance=o.createTokenInstance,h.EMPTY_ALT=r.EMPTY_ALT,h.defaultErrorProvider=p.defaultErrorProvider,h.exceptions={},h.exceptions.isRecognitionException=a.exceptions.isRecognitionException,h.exceptions.EarlyExitException=a.exceptions.EarlyExitException,h.exceptions.MismatchedTokenException=a.exceptions.MismatchedTokenException,h.exceptions.NotAllInputParsedException=a.exceptions.NotAllInputParsedException,h.exceptions.NoViableAltException=a.exceptions.NoViableAltException,h.gast={},h.gast.GAstVisitor=s.gast.GAstVisitor,h.gast.Flat=s.gast.Flat,h.gast.Repetition=s.gast.Repetition,h.gast.RepetitionWithSeparator=s.gast.RepetitionWithSeparator,h.gast.RepetitionMandatory=s.gast.RepetitionMandatory,h.gast.RepetitionMandatoryWithSeparator=s.gast.RepetitionMandatoryWithSeparator,h.gast.Option=s.gast.Option,h.gast.Alternation=s.gast.Alternation,h.gast.NonTerminal=s.gast.NonTerminal,h.gast.Terminal=s.gast.Terminal,h.gast.Rule=s.gast.Rule,h.gast.serializeGrammar=s.gast.serializeGrammar,h.gast.serializeProduction=s.gast.serializeProduction,h.interperter={},h.interperter.NextAfterTokenWalker=u.NextAfterTokenWalker,h.clearCache=c.clearCache,h.createSyntaxDiagramsCode=f.createSyntaxDiagramsCode,t.exports=h},function(t,e,n){"use strict";function r(t){var e=new c(t);return e.resolveRefs(),e.errors}var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(6),a=n(1),s=n(0);e.resolveGrammar=r;var c=function(t){function e(e){var n=t.call(this)||this;return n.nameToTopRule=e,n.errors=[],n}return i(e,t),e.prototype.resolveRefs=function(){var t=this;s.forEach(this.nameToTopRule.values(),function(e){t.currTopLevel=e,e.accept(t)})},e.prototype.visitNonTerminal=function(t){var e=this.nameToTopRule.get(t.nonTerminalName);if(e)t.referencedRule=e;else{var n="Invalid grammar, reference to a rule which is not defined: ->"+t.nonTerminalName+"<-\ninside top level rule: ->"+this.currTopLevel.name+"<-";this.errors.push({message:n,type:o.ParserDefinitionErrorType.UNRESOLVED_SUBRULE_REF,ruleName:this.currTopLevel.name,unresolvedRefName:t.nonTerminalName})}},e}(a.gast.GAstVisitor);e.GastRefResolverVisitor=c},function(t,e,n){"use strict";function r(){e.SUPPORT_STICKY=!1}function i(){e.SUPPORT_STICKY=!0}function o(t,n){void 0===n&&(n=e.SUPPORT_STICKY);var r=L.reject(t,function(t){return t[P]===I.Lexer.NA}),i=!1,o=L.map(r,function(t){var e=t[P];if(L.isRegExp(e)){var r=e.source;return 1===r.length&&"^"!==r&&"$"!==r&&"."!==r?r:2!==r.length||"\\"!==r[0]||L.contains(["d","D","s","S","t","r","n","t","0","c","b","B","f","v","w","W"],r[1])?n?g(e):_(e):r[1]}if(L.isFunction(e))return i=!0,{exec:e};if(L.has(e,"exec"))return i=!0,e;if("string"==typeof e){if(1===e.length)return e;var o=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),a=new RegExp(o);return n?g(a):_(a)}throw Error("non exhaustive match")}),a=L.map(r,function(t){return t.tokenTypeIdx}),s=L.map(r,function(t){var e=t.GROUP;if(e!==I.Lexer.SKIPPED){if(L.isString(e))return e;if(L.isUndefined(e))return!1;throw Error("non exhaustive match")}}),c=L.map(r,function(t){var e=t.LONGER_ALT;if(e){return L.indexOf(r,e)}}),u=L.map(r,function(t){return t.PUSH_MODE}),l=L.map(r,function(t){return L.has(t,"POP_MODE")}),p=L.map(r,function(t){return!0===t.LINE_BREAKS}),f=L.map(r,N),h=L.map(o,S);return{emptyGroups:L.reduce(r,function(t,e){var n=e.GROUP;return L.isString(n)&&n!==I.Lexer.SKIPPED&&(t[n]=[]),t},{}),patternIdxToConfig:L.map(o,function(t,e){return{pattern:o[e],longerAlt:c[e],canLineTerminator:p[e],isCustom:f[e],short:h[e],group:s[e],push:u[e],pop:l[e],tokenTypeIdx:a[e],tokenType:r[e]}}),hasCustom:i}}function a(t,e){var n=[],r=c(t);n=n.concat(r.errors);var i=u(r.valid),o=i.valid;return n=n.concat(i.errors),n=n.concat(s(o)),n=n.concat(T(o)),n=n.concat(E(o,e)),n=n.concat(m(o))}function s(t){var e=[],n=L.filter(t,function(t){return L.isRegExp(t[P])});return e=e.concat(l(n)),e=e.concat(f(n)),e=e.concat(h(n)),e=e.concat(d(n)),e=e.concat(p(n))}function c(t){var e=L.filter(t,function(t){return!L.has(t,P)});return{errors:L.map(e,function(t){return{message:"Token Type: ->"+O.tokenName(t)+"<- missing static 'PATTERN' property",type:I.LexerDefinitionErrorType.MISSING_PATTERN,tokenTypes:[t]}}),valid:L.difference(t,e)}}function u(t){var e=L.filter(t,function(t){var e=t[P];return!(L.isRegExp(e)||L.isFunction(e)||L.has(e,"exec")||L.isString(e))});return{errors:L.map(e,function(t){return{message:"Token Type: ->"+O.tokenName(t)+"<- static 'PATTERN' can only be a RegExp, a Function matching the {CustomPatternMatcherFunc} type or an Object matching the {ICustomPattern} interface.",type:I.LexerDefinitionErrorType.INVALID_PATTERN,tokenTypes:[t]}}),valid:L.difference(t,e)}}function l(t){var e=L.filter(t,function(t){var e=t[P];return k.test(e.source)});return L.map(e,function(t){return{message:"Unexpected RegExp Anchor Error:\n\tToken Type: ->"+O.tokenName(t)+"<- static 'PATTERN' cannot contain end of input anchor '$'\n\tSee sap.github.io/chevrotain/website/Building_Grammars/resolving_lexer_errors.html#ANCHORS\tfor details.",type:I.LexerDefinitionErrorType.EOI_ANCHOR_FOUND,tokenTypes:[t]}})}function p(t){var e=L.filter(t,function(t){return t[P].test("")});return L.map(e,function(t){return{message:"Token Type: ->"+O.tokenName(t)+"<- static 'PATTERN' must not match an empty string",type:I.LexerDefinitionErrorType.EMPTY_MATCH_PATTERN,tokenTypes:[t]}})}function f(t){var e=L.filter(t,function(t){var e=t[P];return x.test(e.source)});return L.map(e,function(t){return{message:"Unexpected RegExp Anchor Error:\n\tToken Type: ->"+O.tokenName(t)+"<- static 'PATTERN' cannot contain start of input anchor '^'\n\tSee https://github.com/SAP/chevrotain/blob/master/docs/resolving_lexer_errors.md#ANCHORS\n\tfor details.",type:I.LexerDefinitionErrorType.SOI_ANCHOR_FOUND,tokenTypes:[t]}})}function h(t){var e=L.filter(t,function(t){var e=t[P];return e instanceof RegExp&&(e.multiline||e.global)});return L.map(e,function(t){return{message:"Token Type: ->"+O.tokenName(t)+"<- static 'PATTERN' may NOT contain global('g') or multiline('m')",type:I.LexerDefinitionErrorType.UNSUPPORTED_FLAGS_FOUND,tokenTypes:[t]}})}function d(t){var e=[],n=L.map(t,function(n){return L.reduce(t,function(t,r){return n.PATTERN.source!==r.PATTERN.source||L.contains(e,r)||r.PATTERN===I.Lexer.NA?t:(e.push(r),t.push(r),t)},[])});n=L.compact(n);var r=L.filter(n,function(t){return t.length>1});return L.map(r,function(t){var e=L.map(t,function(t){return O.tokenName(t)});return{message:"The same RegExp pattern ->"+L.first(t).PATTERN+"<-has been used in all of the following Token Types: "+e.join(", ")+" <-",type:I.LexerDefinitionErrorType.DUPLICATE_PATTERNS_FOUND,tokenTypes:t}})}function T(t){var e=L.filter(t,function(t){if(!L.has(t,"GROUP"))return!1;var e=t.GROUP;return e!==I.Lexer.SKIPPED&&e!==I.Lexer.NA&&!L.isString(e)});return L.map(e,function(t){return{message:"Token Type: ->"+O.tokenName(t)+"<- static 'GROUP' can only be Lexer.SKIPPED/Lexer.NA/A String",type:I.LexerDefinitionErrorType.INVALID_GROUP_TYPE_FOUND,tokenTypes:[t]}})}function E(t,e){var n=L.filter(t,function(t){return void 0!==t.PUSH_MODE&&!L.contains(e,t.PUSH_MODE)});return L.map(n,function(t){return{message:"Token Type: ->"+O.tokenName(t)+"<- static 'PUSH_MODE' value cannot refer to a Lexer Mode ->"+t.PUSH_MODE+"<-which does not exist",type:I.LexerDefinitionErrorType.PUSH_MODE_DOES_NOT_EXIST,tokenTypes:[t]}})}function m(t){var e=[],n=L.reduce(t,function(t,e,n){var r=e.PATTERN;return r===I.Lexer.NA?t:(L.isString(r)?t.push({str:r,idx:n,tokenType:e}):L.isRegExp(r)&&y(r)&&t.push({str:r.source,idx:n,tokenType:e}),t)},[]);return L.forEach(t,function(t,r){L.forEach(n,function(n){var i=n.str,o=n.idx,a=n.tokenType;if(r<o&&v(i,t.PATTERN)){var s="Token: ->"+O.tokenName(a)+"<- can never be matched.\nBecause it appears AFTER the Token Type ->"+O.tokenName(t)+"<-in the lexer's definition.\nSee http://sap.github.io/chevrotain/website/Building_Grammars/resolving_lexer_errors.html#UNREACHABLE";e.push({message:s,type:I.LexerDefinitionErrorType.UNREACHABLE_PATTERN,tokenTypes:[t,a]})}})}),e}function v(t,e){if(L.isRegExp(e)){var n=e.exec(t);return null!==n&&0===n.index}if(L.isFunction(e))return e(t,0,[],{});if(L.has(e,"exec"))return e.exec(t,0,[],{});if("string"==typeof e)return e===t;throw Error("non exhaustive match")}function y(t){var e=[".","\\","[","]","|","^","$","(",")","?","*","+","{"];return void 0===L.find(e,function(e){return-1!==t.source.indexOf(e)})}function _(t){var e=t.ignoreCase?"i":"";return new RegExp("^(?:"+t.source+")",e)}function g(t){var e=t.ignoreCase?"iy":"y";return new RegExp(""+t.source,e)}function R(t,n){var r=[];L.has(t,e.DEFAULT_MODE)||r.push({message:"A MultiMode Lexer cannot be initialized without a <"+e.DEFAULT_MODE+"> property in its definition\n",type:I.LexerDefinitionErrorType.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE}),L.has(t,e.MODES)||r.push({message:"A MultiMode Lexer cannot be initialized without a <"+e.MODES+"> property in its definition\n",type:I.LexerDefinitionErrorType.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY}),L.has(t,e.MODES)&&L.has(t,e.DEFAULT_MODE)&&!L.has(t.modes,t.defaultMode)&&r.push({message:"A MultiMode Lexer cannot be initialized with a "+e.DEFAULT_MODE+": <"+t.defaultMode+">which does not exist\n",type:I.LexerDefinitionErrorType.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST}),L.has(t,e.MODES)&&L.forEach(t.modes,function(t,e){L.forEach(t,function(t,n){L.isUndefined(t)&&r.push({message:"A Lexer cannot be initialized using an undefined Token Type. Mode:<"+e+"> at index: <"+n+">\n",type:I.LexerDefinitionErrorType.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED})})});var i=L.flatten(L.mapValues(t.modes,function(t){return t}));return n&&void 0===L.find(i,function(t){return t.LINE_BREAKS})&&r.push({message:"No LINE_BREAKS Error:\n\tThis Lexer has been defined to track line and column information,\n\tyet none of the Token definitions contain a LINE_BREAK flag.\n\tSee http://sap.github.io/chevrotain/website/Building_Grammars/resolving_lexer_errors.html#LINE_BREAKS \n\tfor details.",type:I.LexerDefinitionErrorType.NO_LINE_BREAKS_FLAGS}),r}function A(t){var e={},n=L.keys(t);return L.forEach(n,function(n){var r=t[n];if(!L.isArray(r))throw Error("non exhaustive match");e[n]=[]}),e}function N(t){var e=t.PATTERN;if(L.isRegExp(e))return!1;if(L.isFunction(e))return!0;if(L.has(e,"exec"))return!0;if(L.isString(e))return!1;throw Error("non exhaustive match")}function S(t){return!(!L.isString(t)||1!==t.length)&&t.charCodeAt(0)}Object.defineProperty(e,"__esModule",{value:!0});var O=n(2),I=n(8),L=n(0),P="PATTERN";e.DEFAULT_MODE="defaultMode",e.MODES="modes",e.SUPPORT_STICKY="boolean"==typeof new RegExp("(?:)").sticky,e.disableSticky=r,e.enableSticky=i,e.analyzeTokenTypes=o,e.validatePatterns=a,e.findMissingPatterns=c,e.findInvalidPatterns=u;var k=/[^\\][\$]/;e.findEndOfInputAnchor=l,e.findEmptyMatchRegExps=p;var x=/[^\\[][\^]|^\^/;e.findStartOfInputAnchor=f,e.findUnsupportedFlags=h,e.findDuplicatePatterns=d,e.findInvalidGroupType=T,e.findModesThatDoNotExist=E,e.findUnreachablePatterns=m,e.addStartOfInput=_,e.addStickyFlag=g,e.performRuntimeChecks=R,e.cloneEmptyGroups=A,e.isCustomPattern=N,e.isShortPattern=S,e.LineTerminatorOptimizedTester={test:function(t){for(var e=t.length,n=this.lastIndex;n<e;n++){var r=t.charCodeAt(n);if(10===r)return this.lastIndex=n+1,!0;if(13===r)return 10===t.charCodeAt(n+1)?this.lastIndex=n+2:this.lastIndex=n+1,!0}return!1},lastIndex:0}},function(t,e,n){"use strict";function r(t){var e=new c.HashTable;return p.forEach(t,function(t){var n=new d(t).startWalking();e.putAll(n)}),e}function i(t,e){return t.name+e+f.IN}function o(t){return h.tokenName(t.terminalType)+t.occurrenceInParent+f.IN}var a=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var s=n(10),c=n(3),u=n(1),l=n(15),p=n(0),f=n(18),h=n(2),d=function(t){function e(e){var n=t.call(this)||this;return n.topProd=e,n.follows=new c.HashTable,n}return a(e,t),e.prototype.startWalking=function(){return this.walk(this.topProd),this.follows},e.prototype.walkTerminal=function(t,e,n){},e.prototype.walkProdRef=function(t,e,n){var r=i(t.referencedRule,t.occurrenceInParent)+this.topProd.name,o=e.concat(n),a=new u.gast.Flat(o),s=l.first(a);this.follows.put(r,s)},e}(s.RestWalker);e.ResyncFollowsWalker=d,e.computeAllProdsFollows=r,e.buildBetweenProdsFollowPrefix=i,e.buildInProdFollowPrefix=o},function(t,e,n){"use strict";function r(t,n,r){e.terminalNameToConstructor=r;var o=" "+t,a=y(" "+o),s=g(a),c=R(s);return i(n,new U.Range(0,t.length+2),c,t)}function i(t,e,n,r){return m(new b.gast.Rule(t,[],r),e,n)}function o(t,e){switch(t.type){case w.AT_LEAST_ONE:return u(t,e);case w.AT_LEAST_ONE_SEP:return l(t,e);case w.MANY_SEP:return f(t,e);case w.MANY:return p(t,e);case w.OPTION:return d(t,e);case w.OR:return T(t,e);case w.FLAT:return E(t,e);case w.REF:return a(t);case w.TERMINAL:return s(t);default:throw Error("non exhaustive match")}}function a(t){var e=j.exec(t.text),n=void 0===e[1],r=n?1:parseInt(e[1],10),i=e[2],o=new b.gast.NonTerminal(i,void 0,r);return o.implicitOccurrenceIndex=n,o}function s(t){var n=V.exec(t.text),r=void 0===n[1],i=r?1:parseInt(n[1],10),o=n[2],a=e.terminalNameToConstructor[o];if(!a)throw Error("Terminal Token name: "+o+" not found");var s=new b.gast.Terminal(a,i);return s.implicitOccurrenceIndex=r,s}function c(t,e,n,r){var i=t.exec(n.text),o=void 0===i[1];e.occurrenceInParent=o?1:parseInt(i[1],10),e.implicitOccurrenceIndex=o;var a=i[2];return K.isUndefined(a)||(e.name=a),m(e,n.range,r)}function u(t,e){return c(at,new b.gast.RepetitionMandatory([]),t,e)}function l(t,e){return h(t,e,b.gast.RepetitionMandatoryWithSeparator,rt)}function p(t,e){return c(q,new b.gast.Repetition([]),t,e)}function f(t,e){return h(t,e,b.gast.RepetitionWithSeparator,tt)}function h(t,n,r,i){var o=i.exec(t.text),a=void 0===o[1],s=a?1:parseInt(o[1],10),c=o[3],u=e.terminalNameToConstructor[c];if(!u)throw Error("Separator Terminal Token name: "+c+" not found");var l=new r([],u,s);l.implicitOccurrenceIndex=a;var p=o[2];return K.isUndefined(p)||(l.name=p),m(l,t.range,n)}function d(t,e){return c(X,new b.gast.Option([]),t,e)}function T(t,e){return c(ut,new b.gast.Alternation([]),t,e)}function E(t,e){var n=new b.gast.Flat([]),r=ft.exec(t.text),i=r[1];return K.isUndefined(i)||(n.name=i),m(n,t.range,e)}function m(t,e,n){var r=v(e,n),i=K.sortBy(r,function(t){return t.range.start}),a=[];return K.forEach(i,function(t){a.push(o(t,n))}),t.definition=a,t}function v(t,e){return K.filter(e,function(n){var r=t.strictlyContainsRange(n.range),i=K.every(e,function(e){var r=e.range.strictlyContainsRange(n.range),i=e.range.isStrictlyContainedInRange(t);return!(r&&i)});return r&&i})}function y(t){return t.replace(dt,"").replace(Tt,"")}function _(t,e){return void 0!==e?t:""}function g(t){return t.replace(Et,_).replace(mt,_)}function R(t){return[].concat(A(t),N(t),S(t),O(t),I(t),L(t),P(t),k(t))}function A(t){return C(t,w.TERMINAL,G)}function N(t){return C(t,w.REF,H)}function S(t){return M(t,w.AT_LEAST_ONE,st)}function O(t){return M(t,w.AT_LEAST_ONE_SEP,it)}function I(t){return M(t,w.MANY,Z)}function L(t){return M(t,w.MANY_SEP,et)}function P(t){return M(t,w.OPTION,z)}function k(t){var e=M(t,w.OR,lt),n=x(e);return e.concat(n)}function x(t){var e=[];return K.forEach(t,function(t){var n=D(t.text,w.FLAT,ht,vt),r=t.range.start;K.forEach(n,function(t){t.range.start+=r,t.range.end+=r}),e=e.concat(n)}),K.uniq(e,function(t){return t.type+"~"+t.range.start+"~"+t.range.end+"~"+t.text})}function C(t,e,n){for(var r,i=[];r=n.exec(t);){var o=r.index,a=n.lastIndex,s=new U.Range(o,a),c=r[0];i.push({range:s,text:c,type:e})}return i}function M(t,e,n){return D(t,e,n,yt)}function D(t,e,n,r){for(var i,o=[];i=n.exec(t);){var a=i.index,s=r(a+i[0].length,t),c=new U.Range(a,s),u=t.substr(a,s-a+1);o.push({range:c,text:u,type:e})}return o}function F(t,e,n,r){for(var i=[1],o=-1;!K.isEmpty(i)&&o+n<r.length;){o++;var a=r.charAt(n+o);a===t?i.push(1):a===e&&i.pop()}if(K.isEmpty(i))return o+n;throw new Error("INVALID INPUT TEXT, UNTERMINATED PARENTHESIS")}Object.defineProperty(e,"__esModule",{value:!0});var w,U=n(25),b=n(1),K=n(0);!function(t){t[t.OPTION=0]="OPTION",t[t.OR=1]="OR",t[t.MANY=2]="MANY",t[t.MANY_SEP=3]="MANY_SEP",t[t.AT_LEAST_ONE=4]="AT_LEAST_ONE",t[t.AT_LEAST_ONE_SEP=5]="AT_LEAST_ONE_SEP",t[t.REF=6]="REF",t[t.TERMINAL=7]="TERMINAL",t[t.FLAT=8]="FLAT"}(w=e.ProdType||(e.ProdType={}));var W=/(?:\s*{\s*NAME\s*:\s*["'`]([\w$]*)["'`])?/,B=new RegExp(W.source.replace("{","").replace(")?","\\s*,)?")),V=/\.\s*CONSUME(\d)?\s*\(\s*(?:[a-zA-Z_$]\w*\s*\.\s*)*([a-zA-Z_$]\w*)/,G=new RegExp(V.source,"g"),j=/\.\s*SUBRULE(\d)?\s*\(\s*(?:[a-zA-Z_$]\w*\s*\.\s*)*([a-zA-Z_$]\w*)/,H=new RegExp(j.source,"g"),Y=/\.\s*OPTION(\d)?\s*\(/,X=new RegExp(Y.source+W.source),z=new RegExp(Y.source,"g"),$=/\.\s*MANY(\d)?\s*\(/,q=new RegExp($.source+W.source),Z=new RegExp($.source,"g"),J=/\s*SEP\s*:\s*(?:[a-zA-Z_$]\w*\s*\.\s*)*([a-zA-Z_$]\w*)/,Q=/\.\s*MANY_SEP(\d)?\s*\(\s*{/,tt=new RegExp(Q.source+B.source+J.source),et=new RegExp(tt.source,"g"),nt=/\.\s*AT_LEAST_ONE_SEP(\d)?\s*\(\s*{/,rt=new RegExp(nt.source+B.source+J.source),it=new RegExp(rt.source,"g"),ot=/\.\s*AT_LEAST_ONE(\d)?\s*\(/,at=new RegExp(ot.source+W.source),st=new RegExp(ot.source,"g"),ct=/\.\s*OR(\d)?\s*\(/,ut=new RegExp(ct.source+W.source),lt=new RegExp(ct.source,"g"),pt=/\s*(ALT)\s*:/,ft=new RegExp(B.source+pt.source),ht=new RegExp(ft.source,"g");e.terminalNameToConstructor={},e.buildTopProduction=r,e.buildProdGast=o,e.getDirectlyContainedRanges=v;var dt=/\/\/.*/g,Tt=/\/\*([^*]|[\r\n]|(\*+([^*\/]|[\r\n])))*\*+\//g,Et=/(NAME\s*:\s*)?"([^\\"]|\\([bfnrtv"\\\/]|u[0-9a-fA-F]{4}))*"/g,mt=/(NAME\s*:\s*)?'([^\\']|\\([bfnrtv'\\\/]|u[0-9a-fA-F]{4}))*'/g;e.removeComments=y,e.removeStringLiterals=g,e.createRanges=R,e.createTerminalRanges=A,e.createRefsRanges=N,e.createAtLeastOneRanges=S,e.createAtLeastOneSepRanges=O,e.createManyRanges=I,e.createManySepRanges=L,e.createOptionRanges=P,e.createOrRanges=k;var vt=K.partial(F,"{","}"),yt=K.partial(F,"(",")");e.createOrPartRanges=x,e.findClosingOffset=F},function(t,e,n){"use strict";function r(t,e){return!(t<0||e<t)}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){if(this.start=t,this.end=e,!r(t,e))throw new Error("INVALID RANGE")}return t.prototype.contains=function(t){return this.start<=t&&this.end>=t},t.prototype.containsRange=function(t){return this.start<=t.start&&this.end>=t.end},t.prototype.isContainedInRange=function(t){return t.containsRange(this)},t.prototype.strictlyContainsRange=function(t){return this.start<t.start&&this.end>t.end},t.prototype.isStrictlyContainedInRange=function(t){return t.strictlyContainsRange(this)},t}();e.Range=i,e.isValidRange=r},function(t,e,n){"use strict";function r(t,e){for(var n=u.keys(t),r=n.length,i=0;i<r;i++)for(var o=n[i],a=t[o],s=a.length,c=0;c<s;c++){var l=a[c];void 0===l.tokenTypeIdx&&(void 0!==l.fullName?this[l.fullName](l.children,e):this[l.name](l.children,e))}}function i(t,e){var n=function(){};return l.defineNameProp(n,t+"BaseSemantics"),n.prototype={visit:function(t,e){if(u.isArray(t)){if(!(t.length>0))return;t=t[0]}return void 0!==t.fullName?this[t.fullName](t.children,e):this[t.name](t.children,e)},validateVisitor:function(){var t=a(this,e);if(!u.isEmpty(t)){var n=u.map(t,function(t){return t.msg});throw Error("Errors Detected in CST Visitor <"+l.functionName(this.constructor)+">:\n\t"+n.join("\n\n").replace(/\n/g,"\n\t"))}}},n.prototype.constructor=n,n._RULE_NAMES=e,n}function o(t,e,n){var i=function(){};l.defineNameProp(i,t+"BaseSemanticsWithDefaults");var o=Object.create(n.prototype);return u.forEach(e,function(t){o[t]=r}),i.prototype=o,i.prototype.constructor=i,i}function a(t,e){var n=s(t,e),r=c(t,e);return n.concat(r)}function s(t,e){var n=u.map(e,function(e){if(!u.isFunction(t[e]))return{msg:"Missing visitor method: <"+e+"> on "+l.functionName(t.constructor)+" CST Visitor.",type:f.MISSING_METHOD,methodName:e}});return u.compact(n)}function c(t,e){var n=[];for(var r in t)p.validTermsPattern.test(r)&&u.isFunction(t[r])&&!u.contains(h,r)&&!u.contains(e,r)&&n.push({msg:"Redundant visitor method: <"+r+"> on "+l.functionName(t.constructor)+" CST Visitor\nThere is no Grammar Rule corresponding to this method's name.\nFor utility methods on visitor classes use methods names that do not match /"+p.validTermsPattern.source+"/.",type:f.REDUNDANT_METHOD,methodName:r});return n}Object.defineProperty(e,"__esModule",{value:!0});var u=n(0),l=n(3),p=n(13);e.defaultVisit=r,e.createBaseSemanticVisitorConstructor=i,e.createBaseVisitorConstructorWithDefaults=o;var f;!function(t){t[t.REDUNDANT_METHOD=0]="REDUNDANT_METHOD",t[t.MISSING_METHOD=1]="MISSING_METHOD"}(f=e.CstVisitorDefinitionError||(e.CstVisitorDefinitionError={})),e.validateVisitor=a,e.validateMissingCstMethods=s;var h=["constructor","visit","validateVisitor"];e.validateRedundantMethods=c},function(t,e,n){"use strict";function r(){i.clearCache()}Object.defineProperty(e,"__esModule",{value:!0});var i=n(7);e.clearCache=r},function(t,e,n){"use strict";function r(t,e){var n=void 0===e?{}:e,r=n.resourceBase,o=void 0===r?"https://unpkg.com/chevrotain@"+i.VERSION+"/diagrams/":r,a=n.css;return"\n\x3c!-- This is a generated file --\x3e\n<!DOCTYPE html>\n<meta charset=\"utf-8\">\n<style>\n  body {\n    background-color: hsl(30, 20%, 95%)\n  }\n</style>\n\n\n<link rel='stylesheet' href='"+(void 0===a?"https://unpkg.com/chevrotain@"+i.VERSION+"/diagrams/diagrams.css":a)+"'>\n\n<script src='"+o+"vendor/railroad-diagrams.js'><\/script>\n<script src='"+o+"src/diagrams_builder.js'><\/script>\n<script src='"+o+"src/diagrams_behavior.js'><\/script>\n<script src='"+o+'src/main.js\'><\/script>\n\n<div id="diagrams" align="center"></div>    \n\n<script>\n    window.serializedGrammar = '+JSON.stringify(t,null,"  ")+';\n<\/script>\n\n<script>\n    var diagramsDiv = document.getElementById("diagrams");\n    main.drawDiagramsFromSerializedGrammar(serializedGrammar, diagramsDiv);\n<\/script>\n'}Object.defineProperty(e,"__esModule",{value:!0});var i=n(11);e.createSyntaxDiagramsCode=r}])});